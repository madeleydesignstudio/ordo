import{r as x,j as e,k as T,l as L,t as C,W as M,a as I,m as $}from"./client-CCgsNV62.js";import{C as F}from"./calendar-C8jxuMpI.js";import{c as w}from"./createLucideIcon-ByO5kUdj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],_=w("Briefcase",E);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],z=w("CircleCheckBig",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],P=w("Flag",A),R=({currentDate:l,onDateChange:c,tasks:u=[]})=>{const[o,h]=x.useState([]),[N,D]=x.useState(!1),[f,v]=x.useState(null),r=s=>s&&s.toISOString().split("T")[0]||"",p=s=>{const t=[];for(let n=-10;n<10;n++){const a=new Date(s);a.setDate(s.getDate()+n),t.push(a)}h(t)};x.useEffect(()=>{p(l)},[l]);const g=()=>{const s=new Date(l);s.setDate(l.getDate()-1),c(s)},b=()=>{const s=new Date(l);s.setDate(l.getDate()+1),c(s)},m=x.useMemo(()=>{if(o.length===0)return[];const s=o.findIndex(a=>r(a)===r(l));if(s===-1)return[];let t=Math.max(0,s-3),n=Math.min(o.length,t+7);return n-t<7&&o.length>=7&&(t=Math.max(0,o.length-7),n=o.length),o.slice(t,n)},[o,l]),j=s=>({day:s.toLocaleDateString("en-US",{weekday:"short"}),date:s.getDate(),fullDateStr:r(s),isSelected:r(s)===r(l),isToday:r(s)===r(new Date)});return e.jsxs("div",{className:"relative h-full border-t border-stone-300 w-full",children:[e.jsx("button",{onClick:g,className:"absolute bottom-0 -translate-y-1/2 left-4 text-stone-600 hover:text-stone-900 p-2 rounded-full bg-white shadow-md hover:bg-stone-100 transition-colors border border-stone-200 z-10","aria-label":"Previous day",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("button",{onClick:b,className:"absolute bottom-0 -translate-y-1/2 right-4 text-stone-600 hover:text-stone-900 p-2 rounded-full bg-white shadow-md hover:bg-stone-100 transition-colors border border-stone-200 z-10","aria-label":"Next day",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex flex-col w-full h-full",children:e.jsx("div",{className:"flex justify-center items-stretch w-full h-full",children:m.map((s,t)=>{const{day:n,date:a,fullDateStr:d,isSelected:y,isToday:k}=j(s),S=u.filter(i=>i.dueDate&&r(new Date(i.dueDate))===d).slice(0,3);return e.jsxs("div",{onClick:()=>c(s),className:`flex flex-col w-full text-neutral-300 h-full min-w-[120px] max-h-[200px] cursor-pointer 
                ${y?"bg-stone-700/60":"hover:bg-stone-800/30"} 
                ${k?"border-t-2 border-purple-600":""} 
                ${t===m.length-1?"":"border-r"} 
                border-stone-300 
                transition-colors duration-150 ease-in-out`,children:[e.jsxs("div",{className:"flex justify-between p-1 px-2 font-semibold border-b border-stone-300",children:[e.jsx("span",{className:`text-xs uppercase ${k?"text-purple-400":"text-stone-400"}`,children:n}),e.jsx("span",{className:`text-sm ${y?"text-white":"text-stone-300"}`,children:a})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-1 space-y-1",children:[N&&t===0&&e.jsx("span",{className:"text-xs text-stone-500",children:"Loading..."}),f&&t===0&&e.jsx("span",{className:"text-xs text-red-500",children:"Error"}),S.length>0?S.map(i=>e.jsx("div",{className:`text-xs p-1 rounded truncate ${i.priority==="urgent"?"bg-red-100 text-red-900":i.priority==="high"?"bg-orange-100 text-orange-900":i.priority==="medium"?"bg-blue-100 text-blue-900":"bg-stone-200 text-stone-800"}`,title:i.name,children:i.name},i.id)):null]})]},d)})})})]})},V=function(){const[c,u]=x.useState(new Date),{data:o,isLoading:h,error:N}=C.tasks.list.useQuery(),{data:D,isLoading:f}=C.projects.list.useQuery(),{isFocusMode:v}=M(),r=I(),p=t=>{u(t)},g=()=>{u(new Date)},b=t=>{const n={weekday:"long",day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("en-US",n)},m=D?.filter(t=>t.status!=="done")?.length||0,j=o?.filter(t=>{const n=t.dueDate?new Date(t.dueDate):null;if(!n)return!1;const a=new Date(n),d=new Date;return a.getDate()===d.getDate()&&a.getMonth()===d.getMonth()&&a.getFullYear()===d.getFullYear()&&t.status!=="done"})?.length||0,s=o?.filter(t=>{const n=t.dueDate?new Date(t.dueDate):null;return n?new Date(n)>=new Date&&t.status!=="done":!1}).sort((t,n)=>{const a=t.dueDate?new Date(t.dueDate):new Date,d=n.dueDate?new Date(n.dueDate):new Date;return a.getTime()-d.getTime()})[0];return e.jsxs("div",{className:$("transition-all duration-300 ease-in-out flex flex-col",v?"h-[97vh] w-[99.5vw]":"h-[93vh] w-[97.1vw]"),children:[e.jsx("div",{className:"min-h-0",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex justify-end items-center mb-4",children:e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 text-xs text-stone-300 border border-stone-300 rounded-md p-1 hover:bg-stone-200 transition-colors",children:[e.jsx(F,{className:"h-4 w-4 text-stone-600"}),e.jsx("span",{className:"text-xs text-stone-600",children:"Today"})]})})})}),e.jsxs("div",{className:"h-full w-3xl mx-auto flex flex-col items-start justify-center gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 justify-start text-left font-bold text-xl text-stone-400",children:[e.jsxs("h1",{children:["Hello ",r?.name||"User"]}),e.jsxs("h2",{children:["Today is ",b(c)]})]}),e.jsx("div",{className:"bg-stone-200/50 w-full h-1/4 rounded-md border border-stone-400"}),e.jsxs("div",{className:"flex flex-row w-full gap-4 h-1/4",children:[e.jsxs("div",{className:"bg-stone-200/50 w-1/3 rounded-md border border-stone-400 p-3 flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-2",children:e.jsx(_,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-stone-800",children:"Active Projects"}),e.jsx("p",{className:"text-xl font-bold",children:m}),f&&e.jsx("p",{className:"text-xs text-stone-500",children:"Loading..."})]})]}),e.jsxs("div",{className:"bg-stone-200 w-1/3 rounded-md border border-stone-400 p-3 flex items-center",children:[e.jsx("div",{className:"bg-amber-100 p-2 rounded-full mr-2",children:e.jsx(z,{className:"h-4 w-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-stone-800",children:"Today's Tasks"}),e.jsx("p",{className:"text-xl font-bold",children:j}),h&&e.jsx("p",{className:"text-xs text-stone-500",children:"Loading..."})]})]}),e.jsxs("div",{className:"bg-stone-200 w-1/3 rounded-md border border-stone-400 p-3 flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full mr-2",children:e.jsx(P,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-stone-800",children:"Next Milestone"}),s?e.jsx("p",{className:"text-sm font-bold truncate",children:s.name}):e.jsx("p",{className:"text-sm font-medium",children:"No upcoming milestones"})]})]})]})]}),e.jsx("div",{className:"h-[175px] w-full flex-shrink-0",children:e.jsx(R,{currentDate:c,onDateChange:p,tasks:o||[]})})]})};export{V as component};
