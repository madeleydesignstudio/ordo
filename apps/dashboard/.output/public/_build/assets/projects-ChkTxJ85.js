import{c as Ie,j as s,B as K,P as Xt,r as c,C as ur,k as Cn,l as Tt,m as q,R as I,n as Te,o as fr,p as hr,a as gr,V as mr,t as et,f as Wt,g as Ht,h as qt,i as Gt,q as Jt}from"./client-C1FlL4RD.js";import{S as vr,a as xr}from"./scroll-area-DXceZDqL.js";import{E as pr}from"./ellipsis-Cd77VwyR.js";import{c as Sn}from"./createLucideIcon-CXsX5fQh.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],yr=Ie("calendar-days",br);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],En=Ie("clock",wr);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Nr=Ie("info",Dr);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cr=Ie("settings",jr);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Er=Ie("zoom-in",Sr);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Tr=Ie("zoom-out",Rr);function Mr(e){return e?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(e)):""}function Ir({projects:e,onEdit:t,onCreateProject:n,onProjectSettings:r,isLoading:o}){return o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((a,l)=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden animate-pulse",children:[s.jsx("div",{className:"h-48 bg-gray-200"}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},l))}):e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"No projects found"}),s.jsx("img",{src:"https://storage.dev-0af.workers.dev/architect.png",alt:"Empty state",className:"w-1/4 mx-auto mb-4"}),s.jsx("div",{className:"text-gray-400 text-sm mb-4",children:"Create your first project to get started"}),n&&s.jsxs(K,{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:[s.jsx(Xt,{className:"h-4 w-4"}),"Create Project"]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(a=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow group cursor-pointer",onClick:()=>t(a),children:[s.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-500 to-purple-600",children:[a.cover?s.jsx("img",{src:a.cover,alt:`${a.name} cover`,className:"w-full h-full object-cover",onError:l=>{const i=l.target;i.style.display="none"}}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("span",{className:"text-6xl opacity-20",children:a.icon||"üìÅ"})}),s.jsx("button",{className:"absolute top-3 right-3 p-2 bg-white/90 hover:bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:l=>{l.stopPropagation(),r?.(a.id)},title:"Project Settings",children:s.jsx(Cr,{className:"h-4 w-4 text-gray-700"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("span",{className:"text-2xl",children:a.icon||"üìÅ"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:a.name})})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Created ",Mr(a.createdAt)]})]})]},a.id)),e.length<6&&n&&Array.from({length:6-e.length}).map((a,l)=>s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors cursor-pointer group",onClick:n,children:[s.jsx("div",{className:"h-48 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xt,{className:"h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors mx-auto mb-2"}),s.jsx("span",{className:"text-sm text-gray-500 group-hover:text-blue-600 transition-colors",children:"Add Project"})]})}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"h-6"})," ",s.jsx("div",{className:"h-5"})," "]})]},`placeholder-${l}`))]})}const Ar={backlog:"#6B7280",todo:"#3B82F6",in_progress:"#F59E0B",done:"#10B981",on_hold:"#EF4444"},kr=({projects:e=[]})=>{const[t,n]=c.useState(new Date),[r,o]=c.useState(null),a=()=>{const m=new Date(t);m.setMonth(m.getMonth()-1),n(m)},l=()=>{const m=new Date(t);m.setMonth(m.getMonth()+1),n(m)},i=()=>{n(new Date)},d=()=>{const m=t.getFullYear(),p=t.getMonth(),D=new Date(m,p,1),w=new Date(m,p+1,0),R=D.getDay(),S=w.getDate(),h=[];for(let x=0;x<R;x++)h.push({day:null,date:null});for(let x=1;x<=S;x++){const v=new Date(m,p,x);h.push({day:x,date:v})}return h},u=m=>m?e.filter(p=>{if(!p.startDate&&!p.dueDate)return!1;const D=p.startDate?new Date(p.startDate):null,w=p.dueDate?new Date(p.dueDate):null;return D&&!w?f(D,m):!D&&w?f(w,m):D&&w?g(m,D,w):!1}):[],f=(m,p)=>m.getFullYear()===p.getFullYear()&&m.getMonth()===p.getMonth()&&m.getDate()===p.getDate(),g=(m,p,D)=>{const w=m.getTime();return w>=p.getTime()&&w<=D.getTime()},y=m=>m?f(m,new Date):!1,b=m=>m.toLocaleDateString("en-US",{month:"long",year:"numeric"}),T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],C=d();return s.jsxs("div",{className:"calendar-view",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ur,{className:"h-5 w-5 mr-2 text-stone-500"}),s.jsx("h2",{className:"text-xl font-semibold",children:b(t)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K,{variant:"outline",size:"sm",onClick:a,children:s.jsx(Cn,{className:"h-4 w-4"})}),s.jsx(K,{variant:"outline",size:"sm",onClick:i,children:"Today"}),s.jsx(K,{variant:"outline",size:"sm",onClick:l,children:s.jsx(Tt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[s.jsx("div",{className:"grid grid-cols-7 bg-stone-100",children:T.map(m=>s.jsx("div",{className:"py-2 text-center text-sm font-medium text-stone-500",children:m},m))}),s.jsx("div",{className:"grid grid-cols-7 border-t",children:C.map((m,p)=>{const{day:D,date:w}=m,R=w?u(w):[];return R.length>0,s.jsx("div",{className:`min-h-24 p-2 border-b border-r relative ${D?y(w)?"bg-blue-50":"":"bg-stone-50"}`,children:D&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`text-sm font-medium ${y(w)?"text-blue-600":""}`,children:D}),s.jsxs("div",{className:"mt-1 space-y-1 max-h-20 overflow-y-auto",children:[R.slice(0,3).map(S=>s.jsxs("div",{className:"text-xs py-1 px-2 rounded truncate cursor-pointer hover:opacity-80",style:{backgroundColor:Ar[S.status]||"#6B7280",color:"white"},onMouseEnter:()=>o(S.id),onMouseLeave:()=>o(null),children:[S.name,r===S.id&&s.jsx("div",{className:"absolute z-10 w-64 p-2 bg-white border rounded shadow-lg left-full ml-2",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"text-base",children:S.icon||"üìÅ"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:S.name}),S.description&&s.jsx("p",{className:"text-xs text-stone-500 mt-1",children:S.description}),s.jsxs("div",{className:"flex flex-col mt-1",children:[S.startDate&&s.jsxs("span",{className:"text-xs text-stone-500",children:["Start: ",new Date(S.startDate).toLocaleDateString()]}),S.dueDate&&s.jsxs("span",{className:"text-xs text-stone-500",children:["Due: ",new Date(S.dueDate).toLocaleDateString()]})]})]})]})})]},S.id)),R.length>3&&s.jsxs("div",{className:"text-xs text-stone-500 flex items-center",children:[s.jsx(Nr,{className:"h-3 w-3 mr-1"}),R.length-3," more"]})]})]})},p)})})]})]})},pt={backlog:"#6B7280",todo:"#3B82F6",in_progress:"#F59E0B",done:"#10B981",on_hold:"#EF4444"},Qt={backlog:"Backlog",todo:"To Do",in_progress:"In Progress",done:"Done",on_hold:"On Hold"},Or=({projects:e=[]})=>{const t=e.filter(h=>h.startDate||h.dueDate),[n,r]=c.useState({start:new Date,end:new Date}),[o,a]=c.useState(1),[l,i]=c.useState(null);c.useEffect(()=>{if(t.length===0){const v=new Date,j=new Date(v.getFullYear(),v.getMonth(),1),E=new Date(v.getFullYear(),v.getMonth()+1,0);r({start:j,end:E});return}let h=null,x=null;if(t.forEach(v=>{const j=v.startDate?new Date(v.startDate):null,E=v.dueDate?new Date(v.dueDate):null;j&&(!h||j<h)&&(h=j),E&&(!x||E>x)&&(x=E)}),h&&x){const v=new Date(h);v.setDate(v.getDate()-5);const j=new Date(x);j.setDate(j.getDate()+5),r({start:v,end:j})}},[t]);const d=()=>a(h=>Math.min(h+1,3)),u=()=>a(h=>Math.max(h-1,1)),f=()=>{const{start:h,end:x}=n,v=x.getTime()-h.getTime(),j=new Date(h.getTime()-v/2),E=new Date(x.getTime()-v/2);r({start:j,end:E})},g=()=>{const{start:h,end:x}=n,v=x.getTime()-h.getTime(),j=new Date(h.getTime()+v/2),E=new Date(x.getTime()+v/2);r({start:j,end:E})},y=()=>{if(t.length===0){const h=new Date,x=new Date(h.getFullYear(),h.getMonth(),1),v=new Date(h.getFullYear(),h.getMonth()+1,0);r({start:x,end:v})}else{let h=null,x=null;if(t.forEach(v=>{const j=v.startDate?new Date(v.startDate):null,E=v.dueDate?new Date(v.dueDate):null;j&&(!h||j<h)&&(h=j),E&&(!x||E>x)&&(x=E)}),h&&x){const v=new Date(h);v.setDate(v.getDate()-5);const j=new Date(x);j.setDate(j.getDate()+5),r({start:v,end:j})}}a(1)},b=h=>h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),T=h=>h.toLocaleDateString("en-US",{month:"short",day:"numeric"}),C=()=>{const{start:h,end:x}=n,v=Math.round((x.getTime()-h.getTime())/(1e3*60*60*24));let j=1;o===2&&(j=7),o===3&&(j=30);const E=[];for(let M=0;M<=v;M+=j){const O=new Date(h.getTime()+M*24*60*60*1e3);E.push(O)}return E},m=(h,x=!0)=>{if(!h)return x?0:100;const{start:v,end:j}=n,E=j.getTime()-v.getTime();return h.getTime()<v.getTime()?0:h.getTime()>j.getTime()?100:(h.getTime()-v.getTime())/E*100},p=[...t].sort((h,x)=>{const v=h.startDate?new Date(h.startDate).getTime():0,j=x.startDate?new Date(x.startDate).getTime():0;return v===j?h.name.localeCompare(x.name):v-j}),D=C(),R=m(new Date,!1),S=R>=0&&R<=100;return s.jsxs("div",{className:"gantt-view",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(En,{className:"h-5 w-5 mr-2 text-stone-500"}),s.jsx("h2",{className:"text-xl font-semibold",children:"Gantt Timeline"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K,{variant:"outline",size:"sm",onClick:f,children:s.jsx(Cn,{className:"h-4 w-4"})}),s.jsx(K,{variant:"outline",size:"sm",onClick:y,children:"Reset"}),s.jsx(K,{variant:"outline",size:"sm",onClick:g,children:s.jsx(Tt,{className:"h-4 w-4"})}),s.jsx(K,{variant:"outline",size:"sm",onClick:u,disabled:o===1,children:s.jsx(Tr,{className:"h-4 w-4"})}),s.jsx(K,{variant:"outline",size:"sm",onClick:d,disabled:o===3,children:s.jsx(Er,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"text-sm text-stone-500 mb-4",children:[s.jsx("span",{className:"font-medium",children:"Time Range:"})," ",b(n.start)," - ",b(n.end)]}),s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[s.jsx("div",{className:"relative border-b",children:s.jsxs("div",{className:"flex h-10",children:[s.jsx("div",{className:"w-1/4 min-w-60 border-r p-2 bg-stone-50 flex items-center",children:s.jsx("span",{className:"font-medium text-sm text-stone-700",children:"Project Name"})}),s.jsx("div",{className:"flex-1 relative",children:D.map((h,x)=>s.jsx("div",{className:"absolute top-0 bottom-0 flex flex-col items-center justify-center border-l",style:{left:`${m(h)}%`},children:s.jsx("span",{className:"text-xs text-stone-500",children:T(h)})},x))})]})}),s.jsx("div",{className:"relative",children:p.length===0?s.jsx("div",{className:"text-center p-10 text-stone-500",children:"No projects with dates to display"}):s.jsxs(s.Fragment,{children:[p.map((h,x)=>{const v=m(h.startDate?new Date(h.startDate):null,!0),E=m(h.dueDate?new Date(h.dueDate):null,!1)-v;return s.jsxs("div",{className:"flex border-b hover:bg-stone-50",children:[s.jsxs("div",{className:"w-1/4 min-w-60 p-3 border-r flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:h.icon||"üìÅ"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm truncate",children:h.name}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:pt[h.status]||"#6B7280",color:"white"},children:Qt[h.status]||h.status})})]})]}),s.jsx("div",{className:"flex-1 h-16 relative",children:s.jsx("div",{className:"absolute top-0 bottom-0 flex items-center",style:{left:`${v}%`,width:`${E}%`},children:s.jsxs("div",{className:"h-8 rounded-md w-full relative cursor-pointer hover:opacity-80",style:{backgroundColor:pt[h.status]||"#6B7280"},onMouseEnter:()=>i(h.id),onMouseLeave:()=>i(null),children:[s.jsx("div",{className:"absolute inset-0 flex items-center px-2 text-white text-xs truncate",children:h.name}),l===h.id&&s.jsx("div",{className:"absolute z-10 w-64 p-2 bg-white border rounded shadow-lg top-full mt-1 left-0",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"text-base",children:h.icon||"üìÅ"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:h.name}),h.description&&s.jsx("p",{className:"text-xs text-stone-500 mt-1",children:h.description}),s.jsxs("div",{className:"flex flex-col mt-1",children:[h.startDate&&s.jsxs("span",{className:"text-xs text-stone-500",children:["Start: ",new Date(h.startDate).toLocaleDateString()]}),h.dueDate&&s.jsxs("span",{className:"text-xs text-stone-500",children:["Due: ",new Date(h.dueDate).toLocaleDateString()]})]})]})]})})]})})})]},h.id)}),S&&s.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-red-500 z-10",style:{left:`${R}%`},children:s.jsx("div",{className:"absolute top-0 transform -translate-x-1/2 bg-red-500 text-white text-xs py-1 px-2 rounded",children:"Today"})})]})})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[s.jsx("div",{className:"text-sm text-stone-500",children:"Status:"}),Object.entries(Qt).map(([h,x])=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:pt[h]}}),s.jsx("span",{className:"text-xs text-stone-700",children:x})]},h))]})]})};function Zt({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:q("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function Pr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const dt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ae(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Mt(e){return"nodeType"in e}function Y(e){var t,n;return e?Ae(e)?e:Mt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function It(e){const{Document:t}=Y(e);return e instanceof t}function We(e){return Ae(e)?!1:e instanceof Y(e).HTMLElement}function Rn(e){return e instanceof Y(e).SVGElement}function ke(e){return e?Ae(e)?e.document:Mt(e)?It(e)?e:We(e)||Rn(e)?e.ownerDocument:document:document:document}const Z=dt?c.useLayoutEffect:c.useEffect;function ut(e){const t=c.useRef(e);return Z(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Lr(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ke(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Z(()=>{n.current!==e&&(n.current=e)},t),n}function He(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function rt(e){const t=ut(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function st(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let bt={};function qe(e,t){return c.useMemo(()=>{if(t)return t;const n=bt[e]==null?0:bt[e]+1;return bt[e]=n,e+"-"+n},[e,t])}function Tn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((a,l)=>{const i=Object.entries(l);for(const[d,u]of i){const f=a[d];f!=null&&(a[d]=f+e*u)}return a},{...t})}}const Me=Tn(1),ot=Tn(-1);function $r(e){return"clientX"in e&&"clientY"in e}function ft(e){if(!e)return!1;const{KeyboardEvent:t}=Y(e.target);return t&&e instanceof t}function zr(e){if(!e)return!1;const{TouchEvent:t}=Y(e.target);return t&&e instanceof t}function at(e){if(zr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return $r(e)?{x:e.clientX,y:e.clientY}:null}const me=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[me.Translate.toString(e),me.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),en="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Fr(e){return e.matches(en)?e:e.querySelector(en)}const Br={display:"none"};function _r(e){let{id:t,value:n}=e;return I.createElement("div",{id:t,style:Br},n)}function Yr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Vr(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Mn=c.createContext(null);function Ur(e){const t=c.useContext(Mn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Kr(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:a}=r;e.forEach(l=>{var i;return(i=l[o])==null?void 0:i.call(l,a)})},[e]),t]}const Xr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Wr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Hr(e){let{announcements:t=Wr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Xr}=e;const{announce:a,announcement:l}=Vr(),i=qe("DndLiveRegion"),[d,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),Ur(c.useMemo(()=>({onDragStart(g){let{active:y}=g;a(t.onDragStart({active:y}))},onDragMove(g){let{active:y,over:b}=g;t.onDragMove&&a(t.onDragMove({active:y,over:b}))},onDragOver(g){let{active:y,over:b}=g;a(t.onDragOver({active:y,over:b}))},onDragEnd(g){let{active:y,over:b}=g;a(t.onDragEnd({active:y,over:b}))},onDragCancel(g){let{active:y,over:b}=g;a(t.onDragCancel({active:y,over:b}))}}),[a,t])),!d)return null;const f=I.createElement(I.Fragment,null,I.createElement(_r,{id:r,value:o.draggable}),I.createElement(Yr,{id:i,announcement:l}));return n?Te.createPortal(f,n):f}var L;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(L||(L={}));function it(){}function yt(e,t){return c.useMemo(()=>({sensor:e,options:{}}),[e,t])}function qr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ee=Object.freeze({x:0,y:0});function Gr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Jr(e,t){const n=at(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Qr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Zr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function es(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function tn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const ts=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=tn(t,t.left,t.top),a=[];for(const l of r){const{id:i}=l,d=n.get(i);if(d){const u=Gr(tn(d),o);a.push({id:i,data:{droppableContainer:l,value:u}})}}return a.sort(Qr)};function ns(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=o-r,i=a-n;if(r<o&&n<a){const d=t.width*t.height,u=e.width*e.height,f=l*i,g=f/(d+u-f);return Number(g.toFixed(4))}return 0}const rs=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const a of r){const{id:l}=a,i=n.get(l);if(i){const d=ns(i,t);d>0&&o.push({id:l,data:{droppableContainer:a,value:d}})}}return o.sort(Zr)};function ss(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function In(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ee}function os(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((l,i)=>({...l,top:l.top+e*i.y,bottom:l.bottom+e*i.y,left:l.left+e*i.x,right:l.right+e*i.x}),{...n})}}const as=os(1);function An(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function is(e,t,n){const r=An(t);if(!r)return e;const{scaleX:o,scaleY:a,x:l,y:i}=r,d=e.left-l-(1-o)*parseFloat(n),u=e.top-i-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,g=a?e.height/a:e.height;return{width:f,height:g,top:u,right:d+f,bottom:u+g,left:d}}const ls={ignoreTransform:!1};function Oe(e,t){t===void 0&&(t=ls);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=Y(e).getComputedStyle(e);u&&(n=is(n,u,f))}const{top:r,left:o,width:a,height:l,bottom:i,right:d}=n;return{top:r,left:o,width:a,height:l,bottom:i,right:d}}function nn(e){return Oe(e,{ignoreTransform:!0})}function cs(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ds(e,t){return t===void 0&&(t=Y(e).getComputedStyle(e)),t.position==="fixed"}function us(e,t){t===void 0&&(t=Y(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=t[o];return typeof a=="string"?n.test(a):!1})}function At(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(It(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!We(o)||Rn(o)||n.includes(o))return n;const a=Y(e).getComputedStyle(o);return o!==e&&us(o,a)&&n.push(o),ds(o,a)?n:r(o.parentNode)}return e?r(e):n}function kn(e){const[t]=At(e,1);return t??null}function wt(e){return!dt||!e?null:Ae(e)?e:Mt(e)?It(e)||e===ke(e).scrollingElement?window:We(e)?e:null:null}function On(e){return Ae(e)?e.scrollX:e.scrollLeft}function Pn(e){return Ae(e)?e.scrollY:e.scrollTop}function St(e){return{x:On(e),y:Pn(e)}}var F;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(F||(F={}));function Ln(e){return!dt||!e?!1:e===document.scrollingElement}function $n(e){const t={x:0,y:0},n=Ln(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:l,isRight:i,maxScroll:r,minScroll:t}}const fs={x:.2,y:.2};function hs(e,t,n,r,o){let{top:a,left:l,right:i,bottom:d}=n;r===void 0&&(r=10),o===void 0&&(o=fs);const{isTop:u,isBottom:f,isLeft:g,isRight:y}=$n(e),b={x:0,y:0},T={x:0,y:0},C={height:t.height*o.y,width:t.width*o.x};return!u&&a<=t.top+C.height?(b.y=F.Backward,T.y=r*Math.abs((t.top+C.height-a)/C.height)):!f&&d>=t.bottom-C.height&&(b.y=F.Forward,T.y=r*Math.abs((t.bottom-C.height-d)/C.height)),!y&&i>=t.right-C.width?(b.x=F.Forward,T.x=r*Math.abs((t.right-C.width-i)/C.width)):!g&&l<=t.left+C.width&&(b.x=F.Backward,T.x=r*Math.abs((t.left+C.width-l)/C.width)),{direction:b,speed:T}}function gs(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function zn(e){return e.reduce((t,n)=>Me(t,St(n)),ee)}function ms(e){return e.reduce((t,n)=>t+On(n),0)}function vs(e){return e.reduce((t,n)=>t+Pn(n),0)}function Fn(e,t){if(t===void 0&&(t=Oe),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);kn(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const xs=[["x",["left","right"],ms],["y",["top","bottom"],vs]];class kt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=At(n),o=zn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,l,i]of xs)for(const d of l)Object.defineProperty(this,d,{get:()=>{const u=i(r),f=o[a]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ye{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function ps(e){const{EventTarget:t}=Y(e);return e instanceof t?e:ke(e)}function Dt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Q;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Q||(Q={}));function rn(e){e.preventDefault()}function bs(e){e.stopPropagation()}var A;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(A||(A={}));const Bn={start:[A.Space,A.Enter],cancel:[A.Esc],end:[A.Space,A.Enter,A.Tab]},ys=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case A.Right:return{...n,x:n.x+25};case A.Left:return{...n,x:n.x-25};case A.Down:return{...n,y:n.y+25};case A.Up:return{...n,y:n.y-25}}};class Ot{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ye(ke(n)),this.windowListeners=new Ye(Y(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Q.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Fn(r),n(ee)}handleKeyDown(t){if(ft(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:a=Bn,coordinateGetter:l=ys,scrollBehavior:i="smooth"}=o,{code:d}=t;if(a.end.includes(d)){this.handleEnd(t);return}if(a.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:ee;this.referenceCoordinates||(this.referenceCoordinates=f);const g=l(t,{active:n,context:r.current,currentCoordinates:f});if(g){const y=ot(g,f),b={x:0,y:0},{scrollableAncestors:T}=r.current;for(const C of T){const m=t.code,{isTop:p,isRight:D,isLeft:w,isBottom:R,maxScroll:S,minScroll:h}=$n(C),x=gs(C),v={x:Math.min(m===A.Right?x.right-x.width/2:x.right,Math.max(m===A.Right?x.left:x.left+x.width/2,g.x)),y:Math.min(m===A.Down?x.bottom-x.height/2:x.bottom,Math.max(m===A.Down?x.top:x.top+x.height/2,g.y))},j=m===A.Right&&!D||m===A.Left&&!w,E=m===A.Down&&!R||m===A.Up&&!p;if(j&&v.x!==g.x){const M=C.scrollLeft+y.x,O=m===A.Right&&M<=S.x||m===A.Left&&M>=h.x;if(O&&!y.y){C.scrollTo({left:M,behavior:i});return}O?b.x=C.scrollLeft-M:b.x=m===A.Right?C.scrollLeft-S.x:C.scrollLeft-h.x,b.x&&C.scrollBy({left:-b.x,behavior:i});break}else if(E&&v.y!==g.y){const M=C.scrollTop+y.y,O=m===A.Down&&M<=S.y||m===A.Up&&M>=h.y;if(O&&!y.x){C.scrollTo({top:M,behavior:i});return}O?b.y=C.scrollTop-M:b.y=m===A.Down?C.scrollTop-S.y:C.scrollTop-h.y,b.y&&C.scrollBy({top:-b.y,behavior:i});break}}this.handleMove(t,Me(ot(g,this.referenceCoordinates),b))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ot.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Bn,onActivation:o}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const i=a.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function sn(e){return!!(e&&"distance"in e)}function on(e){return!!(e&&"delay"in e)}class Pt{constructor(t,n,r){var o;r===void 0&&(r=ps(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:l}=a;this.props=t,this.events=n,this.document=ke(l),this.documentListeners=new Ye(this.document),this.listeners=new Ye(r),this.windowListeners=new Ye(Y(l)),this.initialCoordinates=(o=at(a))!=null?o:ee,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.DragStart,rn),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),this.windowListeners.add(Q.ContextMenu,rn),this.documentListeners.add(Q.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(on(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(sn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Q.Click,bs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Q.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:l,options:{activationConstraint:i}}=a;if(!o)return;const d=(n=at(t))!=null?n:ee,u=ot(o,d);if(!r&&i){if(sn(i)){if(i.tolerance!=null&&Dt(u,i.tolerance))return this.handleCancel();if(Dt(u,i.distance))return this.handleStart()}if(on(i)&&Dt(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===A.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ws={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class _n extends Pt{constructor(t){const{event:n}=t,r=ke(n.target);super(t,ws,r)}}_n.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Ds={move:{name:"mousemove"},end:{name:"mouseup"}};var Et;(function(e){e[e.RightClick=2]="RightClick"})(Et||(Et={}));class Yn extends Pt{constructor(t){super(t,Ds,ke(t.event.target))}}Yn.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Et.RightClick?!1:(r?.({event:n}),!0)}}];const Nt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Vn extends Pt{constructor(t){super(t,Nt)}static setup(){return window.addEventListener(Nt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Nt.move.name,t)};function t(){}}}Vn.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var Ve;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ve||(Ve={}));var lt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(lt||(lt={}));function Ns(e){let{acceleration:t,activator:n=Ve.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:l=5,order:i=lt.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:g,threshold:y}=e;const b=Cs({delta:g,disabled:!a}),[T,C]=Lr(),m=c.useRef({x:0,y:0}),p=c.useRef({x:0,y:0}),D=c.useMemo(()=>{switch(n){case Ve.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Ve.DraggableRect:return o}},[n,o,d]),w=c.useRef(null),R=c.useCallback(()=>{const h=w.current;if(!h)return;const x=m.current.x*p.current.x,v=m.current.y*p.current.y;h.scrollBy(x,v)},[]),S=c.useMemo(()=>i===lt.TreeOrder?[...u].reverse():u,[i,u]);c.useEffect(()=>{if(!a||!u.length||!D){C();return}for(const h of S){if(r?.(h)===!1)continue;const x=u.indexOf(h),v=f[x];if(!v)continue;const{direction:j,speed:E}=hs(h,v,D,t,y);for(const M of["x","y"])b[M][j[M]]||(E[M]=0,j[M]=0);if(E.x>0||E.y>0){C(),w.current=h,T(R,l),m.current=E,p.current=j;return}}m.current={x:0,y:0},p.current={x:0,y:0},C()},[t,R,r,C,a,l,JSON.stringify(D),JSON.stringify(b),T,u,S,f,JSON.stringify(y)])}const js={x:{[F.Backward]:!1,[F.Forward]:!1},y:{[F.Backward]:!1,[F.Forward]:!1}};function Cs(e){let{delta:t,disabled:n}=e;const r=st(t);return He(o=>{if(n||!r||!o)return js;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[F.Backward]:o.x[F.Backward]||a.x===-1,[F.Forward]:o.x[F.Forward]||a.x===1},y:{[F.Backward]:o.y[F.Backward]||a.y===-1,[F.Forward]:o.y[F.Forward]||a.y===1}}},[n,t,r])}function Ss(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return He(o=>{var a;return t==null?null:(a=r??o)!=null?a:null},[r,t])}function Es(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,a=o.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...a]},[]),[e,t])}var Xe;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Xe||(Xe={}));var Rt;(function(e){e.Optimized="optimized"})(Rt||(Rt={}));const an=new Map;function Rs(e,t){let{dragging:n,dependencies:r,config:o}=t;const[a,l]=c.useState(null),{frequency:i,measure:d,strategy:u}=o,f=c.useRef(e),g=m(),y=Ke(g),b=c.useCallback(function(p){p===void 0&&(p=[]),!y.current&&l(D=>D===null?p:D.concat(p.filter(w=>!D.includes(w))))},[y]),T=c.useRef(null),C=He(p=>{if(g&&!n)return an;if(!p||p===an||f.current!==e||a!=null){const D=new Map;for(let w of e){if(!w)continue;if(a&&a.length>0&&!a.includes(w.id)&&w.rect.current){D.set(w.id,w.rect.current);continue}const R=w.node.current,S=R?new kt(d(R),R):null;w.rect.current=S,S&&D.set(w.id,S)}return D}return p},[e,a,n,g,d]);return c.useEffect(()=>{f.current=e},[e]),c.useEffect(()=>{g||b()},[n,g]),c.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),c.useEffect(()=>{g||typeof i!="number"||T.current!==null||(T.current=setTimeout(()=>{b(),T.current=null},i))},[i,g,b,...r]),{droppableRects:C,measureDroppableContainers:b,measuringScheduled:a!=null};function m(){switch(u){case Xe.Always:return!1;case Xe.BeforeDragging:return n;default:return!n}}}function Lt(e,t){return He(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ts(e,t){return Lt(e,t)}function Ms(e){let{callback:t,disabled:n}=e;const r=ut(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function ht(e){let{callback:t,disabled:n}=e;const r=ut(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function Is(e){return new kt(Oe(e),e)}function ln(e,t,n){t===void 0&&(t=Is);const[r,o]=c.useState(null);function a(){o(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const l=Ms({callback(d){if(e)for(const u of d){const{type:f,target:g}=u;if(f==="childList"&&g instanceof HTMLElement&&g.contains(e)){a();break}}}}),i=ht({callback:a});return Z(()=>{a(),e?(i?.observe(e),l?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),l?.disconnect())},[e]),r}function As(e){const t=Lt(e);return In(e,t)}const cn=[];function ks(e){const t=c.useRef(e),n=He(r=>e?r&&r!==cn&&e&&t.current&&e.parentNode===t.current.parentNode?r:At(e):cn,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Os(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(a=>{const l=wt(a.target);l&&n(i=>i?(i.set(l,St(l)),new Map(i)):null)},[]);return c.useEffect(()=>{const a=r.current;if(e!==a){l(a);const i=e.map(d=>{const u=wt(d);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,St(u)]):null}).filter(d=>d!=null);n(i.length?new Map(i):null),r.current=e}return()=>{l(e),l(a)};function l(i){i.forEach(d=>{const u=wt(d);u?.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,l)=>Me(a,l),ee):zn(e):ee,[e,t])}function dn(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==ee;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ot(e,n.current):ee}function Ps(e){c.useEffect(()=>{if(!dt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ls(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:a}=r;return n[o]=l=>{a(l,t)},n},{}),[e,t])}function Un(e){return c.useMemo(()=>e?cs(e):null,[e])}const un=[];function $s(e,t){t===void 0&&(t=Oe);const[n]=e,r=Un(n?Y(n):null),[o,a]=c.useState(un);function l(){a(()=>e.length?e.map(d=>Ln(d)?r:new kt(t(d),d)):un)}const i=ht({callback:l});return Z(()=>{i?.disconnect(),l(),e.forEach(d=>i?.observe(d))},[e]),o}function Kn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return We(t)?t:e}function zs(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(u=>{for(const{target:f}of u)if(We(f)){r(g=>{const y=t(f);return g?{...g,width:y.width,height:y.height}:y});break}},[t]),a=ht({callback:o}),l=c.useCallback(u=>{const f=Kn(u);a?.disconnect(),f&&a?.observe(f),r(f?t(f):null)},[t,a]),[i,d]=rt(l);return c.useMemo(()=>({nodeRef:i,rect:n,setRef:d}),[n,i,d])}const Fs=[{sensor:_n,options:{}},{sensor:Ot,options:{}}],Bs={current:{}},nt={draggable:{measure:nn},droppable:{measure:nn,strategy:Xe.WhileDragging,frequency:Rt.Optimized},dragOverlay:{measure:Oe}};class Ue extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const _s={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ue,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:it},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nt,measureDroppableContainers:it,windowRect:null,measuringScheduled:!1},Xn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:it,draggableNodes:new Map,over:null,measureDroppableContainers:it},Ge=c.createContext(Xn),Wn=c.createContext(_s);function Ys(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ue}}}function Vs(e,t){switch(t.type){case L.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case L.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case L.DragEnd:case L.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case L.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Ue(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case L.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const l=new Ue(e.droppable.containers);return l.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:l}}}case L.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Ue(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Us(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(Ge),a=st(r),l=st(n?.id);return c.useEffect(()=>{if(!t&&!r&&a&&l!=null){if(!ft(a)||document.activeElement===a.target)return;const i=o.get(l);if(!i)return;const{activatorNode:d,node:u}=i;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const g=Fr(f);if(g){g.focus();break}}})}},[r,t,o,l,a]),null}function Hn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),n):n}function Ks(e){return c.useMemo(()=>({draggable:{...nt.draggable,...e?.draggable},droppable:{...nt.droppable,...e?.droppable},dragOverlay:{...nt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Xs(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const a=c.useRef(!1),{x:l,y:i}=typeof o=="boolean"?{x:o,y:o}:o;Z(()=>{if(!l&&!i||!t){a.current=!1;return}if(a.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const f=n(u),g=In(f,r);if(l||(g.x=0),i||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=kn(u);y&&y.scrollBy({top:g.y,left:g.x})}},[t,l,i,r,n])}const gt=c.createContext({...ee,scaleX:1,scaleY:1});var ge;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ge||(ge={}));const Ws=c.memo(function(t){var n,r,o,a;let{id:l,accessibility:i,autoScroll:d=!0,children:u,sensors:f=Fs,collisionDetection:g=rs,measuring:y,modifiers:b,...T}=t;const C=c.useReducer(Vs,void 0,Ys),[m,p]=C,[D,w]=Kr(),[R,S]=c.useState(ge.Uninitialized),h=R===ge.Initialized,{draggable:{active:x,nodes:v,translate:j},droppable:{containers:E}}=m,M=x!=null?v.get(x):null,O=c.useRef({initial:null,translated:null}),$=c.useMemo(()=>{var _;return x!=null?{id:x,data:(_=M?.data)!=null?_:Bs,rect:O}:null},[x,M]),z=c.useRef(null),[ve,be]=c.useState(null),[N,P]=c.useState(null),V=Ke(T,Object.values(T)),ye=qe("DndDescribedBy",l),we=c.useMemo(()=>E.getEnabled(),[E]),U=Ks(y),{droppableRects:se,measureDroppableContainers:xe,measuringScheduled:Pe}=Rs(we,{dragging:h,dependencies:[j.x,j.y],config:U.droppable}),G=Ss(v,x),Je=c.useMemo(()=>N?at(N):null,[N]),le=dr(),oe=Ts(G,U.draggable.measure);Xs({activeNode:x!=null?v.get(x):null,config:le.layoutShiftCompensation,initialRect:oe,measure:U.draggable.measure});const k=ln(G,U.draggable.measure,oe),Le=ln(G?G.parentElement:null),te=c.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:v,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),De=E.getNodeFor((n=te.current.over)==null?void 0:n.id),ae=zs({measure:U.dragOverlay.measure}),Ne=(r=ae.nodeRef.current)!=null?r:G,je=h?(o=ae.rect)!=null?o:k:null,zt=!!(ae.nodeRef.current&&ae.rect),Ft=As(zt?null:k),mt=Un(Ne?Y(Ne):null),ce=ks(h?De??G:null),Qe=$s(ce),Ze=Hn(b,{transform:{x:j.x-Ft.x,y:j.y-Ft.y,scaleX:1,scaleY:1},activatorEvent:N,active:$,activeNodeRect:k,containerNodeRect:Le,draggingNodeRect:je,over:te.current.over,overlayNodeRect:ae.rect,scrollableAncestors:ce,scrollableAncestorRects:Qe,windowRect:mt}),Bt=Je?Me(Je,j):null,_t=Os(ce),rr=dn(_t),sr=dn(_t,[k]),Ce=Me(Ze,rr),Se=je?as(je,Ze):null,$e=$&&Se?g({active:$,collisionRect:Se,droppableRects:se,droppableContainers:we,pointerCoordinates:Bt}):null,Yt=es($e,"id"),[de,Vt]=c.useState(null),or=zt?Ze:Me(Ze,sr),ar=ss(or,(a=de?.rect)!=null?a:null,k),vt=c.useRef(null),Ut=c.useCallback((_,X)=>{let{sensor:W,options:ue}=X;if(z.current==null)return;const J=v.get(z.current);if(!J)return;const H=_.nativeEvent,ne=new W({active:z.current,activeNode:J,event:H,options:ue,context:te,onAbort(B){if(!v.get(B))return;const{onDragAbort:re}=V.current,ie={id:B};re?.(ie),D({type:"onDragAbort",event:ie})},onPending(B,fe,re,ie){if(!v.get(B))return;const{onDragPending:Fe}=V.current,he={id:B,constraint:fe,initialCoordinates:re,offset:ie};Fe?.(he),D({type:"onDragPending",event:he})},onStart(B){const fe=z.current;if(fe==null)return;const re=v.get(fe);if(!re)return;const{onDragStart:ie}=V.current,ze={activatorEvent:H,active:{id:fe,data:re.data,rect:O}};Te.unstable_batchedUpdates(()=>{ie?.(ze),S(ge.Initializing),p({type:L.DragStart,initialCoordinates:B,active:fe}),D({type:"onDragStart",event:ze}),be(vt.current),P(H)})},onMove(B){p({type:L.DragMove,coordinates:B})},onEnd:Ee(L.DragEnd),onCancel:Ee(L.DragCancel)});vt.current=ne;function Ee(B){return async function(){const{active:re,collisions:ie,over:ze,scrollAdjustedTranslate:Fe}=te.current;let he=null;if(re&&Fe){const{cancelDrop:Be}=V.current;he={activatorEvent:H,active:re,collisions:ie,delta:Fe,over:ze},B===L.DragEnd&&typeof Be=="function"&&await Promise.resolve(Be(he))&&(B=L.DragCancel)}z.current=null,Te.unstable_batchedUpdates(()=>{p({type:B}),S(ge.Uninitialized),Vt(null),be(null),P(null),vt.current=null;const Be=B===L.DragEnd?"onDragEnd":"onDragCancel";if(he){const xt=V.current[Be];xt?.(he),D({type:Be,event:he})}})}}},[v]),ir=c.useCallback((_,X)=>(W,ue)=>{const J=W.nativeEvent,H=v.get(ue);if(z.current!==null||!H||J.dndKit||J.defaultPrevented)return;const ne={active:H};_(W,X.options,ne)===!0&&(J.dndKit={capturedBy:X.sensor},z.current=ue,Ut(W,X))},[v,Ut]),Kt=Es(f,ir);Ps(f),Z(()=>{k&&R===ge.Initializing&&S(ge.Initialized)},[k,R]),c.useEffect(()=>{const{onDragMove:_}=V.current,{active:X,activatorEvent:W,collisions:ue,over:J}=te.current;if(!X||!W)return;const H={active:X,activatorEvent:W,collisions:ue,delta:{x:Ce.x,y:Ce.y},over:J};Te.unstable_batchedUpdates(()=>{_?.(H),D({type:"onDragMove",event:H})})},[Ce.x,Ce.y]),c.useEffect(()=>{const{active:_,activatorEvent:X,collisions:W,droppableContainers:ue,scrollAdjustedTranslate:J}=te.current;if(!_||z.current==null||!X||!J)return;const{onDragOver:H}=V.current,ne=ue.get(Yt),Ee=ne&&ne.rect.current?{id:ne.id,rect:ne.rect.current,data:ne.data,disabled:ne.disabled}:null,B={active:_,activatorEvent:X,collisions:W,delta:{x:J.x,y:J.y},over:Ee};Te.unstable_batchedUpdates(()=>{Vt(Ee),H?.(B),D({type:"onDragOver",event:B})})},[Yt]),Z(()=>{te.current={activatorEvent:N,active:$,activeNode:G,collisionRect:Se,collisions:$e,droppableRects:se,draggableNodes:v,draggingNode:Ne,draggingNodeRect:je,droppableContainers:E,over:de,scrollableAncestors:ce,scrollAdjustedTranslate:Ce},O.current={initial:je,translated:Se}},[$,G,$e,Se,v,Ne,je,se,E,de,ce,Ce]),Ns({...le,delta:j,draggingRect:Se,pointerCoordinates:Bt,scrollableAncestors:ce,scrollableAncestorRects:Qe});const lr=c.useMemo(()=>({active:$,activeNode:G,activeNodeRect:k,activatorEvent:N,collisions:$e,containerNodeRect:Le,dragOverlay:ae,draggableNodes:v,droppableContainers:E,droppableRects:se,over:de,measureDroppableContainers:xe,scrollableAncestors:ce,scrollableAncestorRects:Qe,measuringConfiguration:U,measuringScheduled:Pe,windowRect:mt}),[$,G,k,N,$e,Le,ae,v,E,se,de,xe,ce,Qe,U,Pe,mt]),cr=c.useMemo(()=>({activatorEvent:N,activators:Kt,active:$,activeNodeRect:k,ariaDescribedById:{draggable:ye},dispatch:p,draggableNodes:v,over:de,measureDroppableContainers:xe}),[N,Kt,$,k,p,ye,v,de,xe]);return I.createElement(Mn.Provider,{value:w},I.createElement(Ge.Provider,{value:cr},I.createElement(Wn.Provider,{value:lr},I.createElement(gt.Provider,{value:ar},u)),I.createElement(Us,{disabled:i?.restoreFocus===!1})),I.createElement(Hr,{...i,hiddenTextDescribedById:ye}));function dr(){const _=ve?.autoScrollEnabled===!1,X=typeof d=="object"?d.enabled===!1:d===!1,W=h&&!_&&!X;return typeof d=="object"?{...d,enabled:W}:{enabled:W}}}),Hs=c.createContext(null),fn="button",qs="Draggable";function Gs(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const a=qe(qs),{activators:l,activatorEvent:i,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:g,over:y}=c.useContext(Ge),{role:b=fn,roleDescription:T="draggable",tabIndex:C=0}=o??{},m=d?.id===t,p=c.useContext(m?gt:Hs),[D,w]=rt(),[R,S]=rt(),h=Ls(l,t),x=Ke(n);Z(()=>(g.set(t,{id:t,key:a,node:D,activatorNode:R,data:x}),()=>{const j=g.get(t);j&&j.key===a&&g.delete(t)}),[g,t]);const v=c.useMemo(()=>({role:b,tabIndex:C,"aria-disabled":r,"aria-pressed":m&&b===fn?!0:void 0,"aria-roledescription":T,"aria-describedby":f.draggable}),[r,b,C,m,T,f.draggable]);return{active:d,activatorEvent:i,activeNodeRect:u,attributes:v,isDragging:m,listeners:r?void 0:h,node:D,over:y,setNodeRef:w,setActivatorNodeRef:S,transform:p}}function qn(){return c.useContext(Wn)}const Js="Droppable",Qs={timeout:25};function Gn(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const a=qe(Js),{active:l,dispatch:i,over:d,measureDroppableContainers:u}=c.useContext(Ge),f=c.useRef({disabled:n}),g=c.useRef(!1),y=c.useRef(null),b=c.useRef(null),{disabled:T,updateMeasurementsFor:C,timeout:m}={...Qs,...o},p=Ke(C??r),D=c.useCallback(()=>{if(!g.current){g.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{u(Array.isArray(p.current)?p.current:[p.current]),b.current=null},m)},[m]),w=ht({callback:D,disabled:T||!l}),R=c.useCallback((v,j)=>{w&&(j&&(w.unobserve(j),g.current=!1),v&&w.observe(v))},[w]),[S,h]=rt(R),x=Ke(t);return c.useEffect(()=>{!w||!S.current||(w.disconnect(),g.current=!1,w.observe(S.current))},[S,w]),c.useEffect(()=>(i({type:L.RegisterDroppable,element:{id:r,key:a,disabled:n,node:S,rect:y,data:x}}),()=>i({type:L.UnregisterDroppable,key:a,id:r})),[r]),c.useEffect(()=>{n!==f.current.disabled&&(i({type:L.SetDroppableDisabled,id:r,key:a,disabled:n}),f.current.disabled=n)},[r,a,n,i]),{active:l,rect:y,isOver:d?.id===r,node:S,over:d,setNodeRef:h}}function Zs(e){let{animation:t,children:n}=e;const[r,o]=c.useState(null),[a,l]=c.useState(null),i=st(n);return!n&&!r&&i&&o(i),Z(()=>{if(!a)return;const d=r?.key,u=r?.props.id;if(d==null||u==null){o(null);return}Promise.resolve(t(u,a)).then(()=>{o(null)})},[t,r,a]),I.createElement(I.Fragment,null,n,r?c.cloneElement(r,{ref:l}):null)}const eo={x:0,y:0,scaleX:1,scaleY:1};function to(e){let{children:t}=e;return I.createElement(Ge.Provider,{value:Xn},I.createElement(gt.Provider,{value:eo},t))}const no={position:"fixed",touchAction:"none"},ro=e=>ft(e)?"transform 250ms ease":void 0,so=c.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:a,className:l,rect:i,style:d,transform:u,transition:f=ro}=e;if(!i)return null;const g=o?u:{...u,scaleX:1,scaleY:1},y={...no,width:i.width,height:i.height,top:i.top,left:i.left,transform:me.Transform.toString(g),transformOrigin:o&&r?Jr(r,i):void 0,transition:typeof f=="function"?f(r):f,...d};return I.createElement(n,{className:l,style:y,ref:t},a)}),oo=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:a,className:l}=e;if(a!=null&&a.active)for(const[i,d]of Object.entries(a.active))d!==void 0&&(o[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,d));if(a!=null&&a.dragOverlay)for(const[i,d]of Object.entries(a.dragOverlay))d!==void 0&&r.node.style.setProperty(i,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[d,u]of Object.entries(o))n.node.style.setProperty(d,u);l!=null&&l.active&&n.node.classList.remove(l.active)}},ao=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:me.Transform.toString(t)},{transform:me.Transform.toString(n)}]},io={duration:250,easing:"ease",keyframes:ao,sideEffects:oo({styles:{active:{opacity:"0"}}})};function lo(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return ut((a,l)=>{if(t===null)return;const i=n.get(a);if(!i)return;const d=i.node.current;if(!d)return;const u=Kn(l);if(!u)return;const{transform:f}=Y(l).getComputedStyle(l),g=An(f);if(!g)return;const y=typeof t=="function"?t:co(t);return Fn(d,o.draggable.measure),y({active:{id:a,data:i.data,node:d,rect:o.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:g})})}function co(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...io,...e};return a=>{let{active:l,dragOverlay:i,transform:d,...u}=a;if(!t)return;const f={x:i.rect.left-l.rect.left,y:i.rect.top-l.rect.top},g={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/i.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/i.rect.height:1},y={x:d.x-f.x,y:d.y-f.y,...g},b=o({...u,active:l,dragOverlay:i,transform:{initial:d,final:y}}),[T]=b,C=b[b.length-1];if(JSON.stringify(T)===JSON.stringify(C))return;const m=r?.({active:l,dragOverlay:i,...u}),p=i.node.animate(b,{duration:t,easing:n,fill:"forwards"});return new Promise(D=>{p.onfinish=()=>{m?.(),D()}})}}let hn=0;function uo(e){return c.useMemo(()=>{if(e!=null)return hn++,hn},[e])}const fo=I.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:a,modifiers:l,wrapperElement:i="div",className:d,zIndex:u=999}=e;const{activatorEvent:f,active:g,activeNodeRect:y,containerNodeRect:b,draggableNodes:T,droppableContainers:C,dragOverlay:m,over:p,measuringConfiguration:D,scrollableAncestors:w,scrollableAncestorRects:R,windowRect:S}=qn(),h=c.useContext(gt),x=uo(g?.id),v=Hn(l,{activatorEvent:f,active:g,activeNodeRect:y,containerNodeRect:b,draggingNodeRect:m.rect,over:p,overlayNodeRect:m.rect,scrollableAncestors:w,scrollableAncestorRects:R,transform:h,windowRect:S}),j=Lt(y),E=lo({config:r,draggableNodes:T,droppableContainers:C,measuringConfiguration:D}),M=j?m.setRef:void 0;return I.createElement(to,null,I.createElement(Zs,{animation:E},g&&x?I.createElement(so,{key:x,id:g.id,ref:M,as:i,activatorEvent:f,adjustScale:t,className:d,transition:a,rect:j,style:{zIndex:u,...o},transform:v},n):null))});function ct(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ho(e,t){return e.reduce((n,r,o)=>{const a=t.get(r);return a&&(n[o]=a),n},Array(e.length))}function tt(e){return e!==null&&e>=0}function go(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function mo(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Jn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const a=ct(t,r,n),l=t[o],i=a[o];return!i||!l?null:{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}},Qn="Sortable",Zn=I.createContext({activeIndex:-1,containerId:Qn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jn,disabled:{draggable:!1,droppable:!1}});function vo(e){let{children:t,id:n,items:r,strategy:o=Jn,disabled:a=!1}=e;const{active:l,dragOverlay:i,droppableRects:d,over:u,measureDroppableContainers:f}=qn(),g=qe(Qn,n),y=i.rect!==null,b=c.useMemo(()=>r.map(h=>typeof h=="object"&&"id"in h?h.id:h),[r]),T=l!=null,C=l?b.indexOf(l.id):-1,m=u?b.indexOf(u.id):-1,p=c.useRef(b),D=!go(b,p.current),w=m!==-1&&C===-1||D,R=mo(a);Z(()=>{D&&T&&f(b)},[D,b,T,f]),c.useEffect(()=>{p.current=b},[b]);const S=c.useMemo(()=>({activeIndex:C,containerId:g,disabled:R,disableTransforms:w,items:b,overIndex:m,useDragOverlay:y,sortedRects:ho(b,d),strategy:o}),[C,g,R.draggable,R.droppable,w,b,m,d,y,o]);return I.createElement(Zn.Provider,{value:S},t)}const xo=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return ct(n,r,o).indexOf(t)},po=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:a,newIndex:l,previousItems:i,previousContainerId:d,transition:u}=e;return!u||!r||i!==a&&o===l?!1:n?!0:l!==o&&t===d},bo={duration:200,easing:"ease"},er="transform",yo=me.Transition.toString({property:er,duration:0,easing:"linear"}),wo={roleDescription:"sortable"};function Do(e){let{disabled:t,index:n,node:r,rect:o}=e;const[a,l]=c.useState(null),i=c.useRef(n);return Z(()=>{if(!t&&n!==i.current&&r.current){const d=o.current;if(d){const u=Oe(r.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&l(f)}}n!==i.current&&(i.current=n)},[t,n,r,o]),c.useEffect(()=>{a&&l(null)},[a]),a}function No(e){let{animateLayoutChanges:t=po,attributes:n,disabled:r,data:o,getNewIndex:a=xo,id:l,strategy:i,resizeObserverConfig:d,transition:u=bo}=e;const{items:f,containerId:g,activeIndex:y,disabled:b,disableTransforms:T,sortedRects:C,overIndex:m,useDragOverlay:p,strategy:D}=c.useContext(Zn),w=jo(r,b),R=f.indexOf(l),S=c.useMemo(()=>({sortable:{containerId:g,index:R,items:f},...o}),[g,o,R,f]),h=c.useMemo(()=>f.slice(f.indexOf(l)),[f,l]),{rect:x,node:v,isOver:j,setNodeRef:E}=Gn({id:l,data:S,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:h,...d}}),{active:M,activatorEvent:O,activeNodeRect:$,attributes:z,setNodeRef:ve,listeners:be,isDragging:N,over:P,setActivatorNodeRef:V,transform:ye}=Gs({id:l,data:S,attributes:{...wo,...n},disabled:w.draggable}),we=Pr(E,ve),U=!!M,se=U&&!T&&tt(y)&&tt(m),xe=!p&&N,Pe=xe&&se?ye:null,Je=se?Pe??(i??D)({rects:C,activeNodeRect:$,activeIndex:y,overIndex:m,index:R}):null,le=tt(y)&&tt(m)?a({id:l,items:f,activeIndex:y,overIndex:m}):R,oe=M?.id,k=c.useRef({activeId:oe,items:f,newIndex:le,containerId:g}),Le=f!==k.current.items,te=t({active:M,containerId:g,isDragging:N,isSorting:U,id:l,index:R,items:f,newIndex:k.current.newIndex,previousItems:k.current.items,previousContainerId:k.current.containerId,transition:u,wasDragging:k.current.activeId!=null}),De=Do({disabled:!te,index:R,node:v,rect:x});return c.useEffect(()=>{U&&k.current.newIndex!==le&&(k.current.newIndex=le),g!==k.current.containerId&&(k.current.containerId=g),f!==k.current.items&&(k.current.items=f)},[U,le,g,f]),c.useEffect(()=>{if(oe===k.current.activeId)return;if(oe!=null&&k.current.activeId==null){k.current.activeId=oe;return}const Ne=setTimeout(()=>{k.current.activeId=oe},50);return()=>clearTimeout(Ne)},[oe]),{active:M,activeIndex:y,attributes:z,data:S,rect:x,index:R,newIndex:le,items:f,isOver:j,isSorting:U,isDragging:N,listeners:be,node:v,overIndex:m,over:P,setNodeRef:we,setActivatorNodeRef:V,setDroppableNodeRef:E,setDraggableNodeRef:ve,transform:De??Je,transition:ae()};function ae(){if(De||Le&&k.current.newIndex===R)return yo;if(!(xe&&!ft(O)||!u)&&(U||te))return me.Transition.toString({...u,property:er})}}function jo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}A.Down,A.Right,A.Up,A.Left;const Co={},gn=e=>{let t;const n=new Set,r=(f,g)=>{const y=typeof f=="function"?f(t):f;if(!Object.is(y,t)){const b=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(T=>T(t,b))}},o=()=>t,d={setState:r,getState:o,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Co?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,d);return d},So=e=>e?gn(e):gn,tr={},{useDebugValue:Eo}=I,{useSyncExternalStoreWithSelector:Ro}=fr;let mn=!1;const To=e=>e;function Mo(e,t=To,n){(tr?"production":void 0)!=="production"&&n&&!mn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),mn=!0);const r=Ro(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Eo(r),r}const vn=e=>{(tr?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?So(e):e,n=(r,o)=>Mo(t,r,o);return Object.assign(n,t),n},Io=e=>e?vn(e):vn;var xn,pn;const bn=typeof window<"u"&&((xn=window.document)!=null&&xn.createElement||((pn=window.navigator)==null?void 0:pn.product)==="ReactNative")?I.useLayoutEffect:I.useEffect;function Ao(){const e=Io(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(o=>o.set),r=e(o=>o.version);return bn(()=>{n(o=>({version:o.version+1}))},[]),bn(()=>(n(({current:o})=>({current:[...o,t]})),()=>n(({current:o})=>({current:o.filter(a=>a!==t)}))),[t,r]),null},Out:()=>{const t=e(n=>n.current);return I.createElement(I.Fragment,null,t)}}}const nr=Ao(),$t=c.createContext({columns:[],data:[],activeCardId:null}),ko=({id:e,children:t,className:n})=>{const{isOver:r,setNodeRef:o}=Gn({id:e});return s.jsx("div",{className:q("flex size-full min-h-40 flex-col divide-y overflow-hidden rounded-md border bg-secondary text-xs shadow-sm ring-2 transition-all",r?"ring-primary":"ring-transparent",n),ref:o,children:t})},Oo=({id:e,name:t,children:n,className:r})=>{const{attributes:o,listeners:a,setNodeRef:l,transition:i,transform:d,isDragging:u}=No({id:e}),{activeCardId:f}=c.useContext($t),g={transition:i,transform:me.Transform.toString(d)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:g,...a,...o,ref:l,children:s.jsx(Zt,{className:q("cursor-grab gap-4 rounded-md p-3 shadow-sm",u&&"pointer-events-none cursor-grabbing opacity-30",r),children:n??s.jsx("p",{className:"m-0 font-medium text-sm",children:t})})}),f===e&&s.jsx(nr.In,{children:s.jsx(Zt,{className:q("cursor-grab gap-4 rounded-md p-3 shadow-sm ring-2 ring-primary",u&&"cursor-grabbing",r),children:n??s.jsx("p",{className:"m-0 font-medium text-sm",children:t})})})]})},Po=({children:e,className:t,...n})=>{const{data:r}=c.useContext($t),o=r.filter(l=>l.column===n.id),a=o.map(l=>l.id);return s.jsxs(vr,{className:"overflow-hidden",children:[s.jsx(vo,{items:a,children:s.jsx("div",{className:q("flex flex-grow flex-col gap-2 p-2",t),...n,children:o.map(e)})}),s.jsx(xr,{orientation:"vertical"})]})},Lo=({className:e,...t})=>s.jsx("div",{className:q("m-0 p-2 font-semibold text-sm",e),...t}),$o=({children:e,onDragStart:t,onDragEnd:n,onDragOver:r,onColumnDrop:o,className:a,columns:l,data:i,onDataChange:d,...u})=>{const[f,g]=c.useState(null),y=qr(yt(Yn),yt(Vn),yt(Ot)),b=p=>{i.find(w=>w.id===p.active.id)&&g(p.active.id),t?.(p)},T=p=>{const{active:D,over:w}=p;if(!w)return;const R=i.find(v=>v.id===D.id),S=i.find(v=>v.id===w.id);if(!R||!S)return;const h=R.column,x=S.column;if(h!==x){let v=[...i];const j=v.findIndex(M=>M.id===D.id),E=v.findIndex(M=>M.id===w.id);j!==-1&&E!==-1&&(v[j].column=x,v=ct(v,j,E),d?.(v))}r?.(p)},C=p=>{g(null),n?.(p);const{active:D,over:w}=p;if(!w)return;const R=D.id.toString(),S=w.id.toString();if(l.some(E=>E.id===S)){const E=R,M=S;let O=[...i];const $=O.findIndex(z=>z.id===E);if($!==-1){const z=O[$]?.column;z&&z!==M&&(O[$]={...O[$],column:M},d?.(O),o&&o(E,M))}return}if(D.id===w.id)return;let x=[...i];const v=x.findIndex(E=>E.id===D.id),j=x.findIndex(E=>E.id===w.id);x=ct(x,v,j),d?.(x)},m={onDragStart({active:p}){const{name:D,column:w}=i.find(R=>R.id===p.id)??{};return`Picked up the card "${D}" from the "${w}" column`},onDragOver({active:p,over:D}){const{name:w}=i.find(S=>S.id===p.id)??{},R=l.find(S=>S.id===D?.id)?.name;return`Dragged the card "${w}" over the "${R}" column`},onDragEnd({active:p,over:D}){const{name:w}=i.find(S=>S.id===p.id)??{},R=l.find(S=>S.id===D?.id)?.name;return`Dropped the card "${w}" into the "${R}" column`},onDragCancel({active:p}){const{name:D}=i.find(w=>w.id===p.id)??{};return`Cancelled dragging the card "${D}"`}};return s.jsx($t.Provider,{value:{columns:l,data:i,activeCardId:f},children:s.jsxs(Ws,{sensors:y,collisionDetection:ts,onDragEnd:C,onDragStart:b,onDragOver:T,accessibility:{announcements:m},...u,children:[s.jsx("div",{className:q("grid size-full auto-cols-fr grid-flow-col gap-4",a),children:l.map(p=>e(p))}),typeof window<"u"&&Te.createPortal(s.jsx(fo,{children:s.jsx(nr.Out,{})}),document.body)]})})},_e={Backlog:"#6B7280","To Do":"#3B82F6","In Progress":"#F59E0B",Done:"#10B981","On Hold":"#EF4444"},yn=[{id:"backlog",name:"Backlog",color:_e.Backlog},{id:"todo",name:"To Do",color:_e["To Do"]},{id:"in_progress",name:"In Progress",color:_e["In Progress"]},{id:"done",name:"Done",color:_e.Done},{id:"on_hold",name:"On Hold",color:_e["On Hold"]}],zo=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}),Fo=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}),wn=({projects:e=[],onStatusChange:t})=>{const[n,r]=c.useState([]);c.useEffect(()=>{const l=e.map(i=>({id:i.id,name:i.name,description:i.description||"",column:i.status,startAt:i.startDate||new Date,endAt:i.dueDate||new Date}));r(l)},[e]);const o=l=>{r(l),t&&l.forEach(i=>{const d=e.find(u=>u.id===i.id);d&&d.status!==i.column&&t(i.id,i.column).catch(u=>{console.error("Failed to update project status:",u)})}),console.log("Kanban items updated:",l)},a=l=>{const{active:i,over:d}=l;if(!d)return;const u=i.id.toString(),f=d.id.toString();if(yn.some(y=>y.id===f)){console.log(`Dropped item ${u} onto column ${f}`);const y=[...n],b=y.findIndex(T=>T.id===u);b!==-1&&y[b].column!==f&&(y[b]={...y[b],column:f},r(y),t&&t(u,f).catch(C=>{console.error("Failed to update project status on column drop:",C)}))}};return s.jsx($o,{onDataChange:o,onDragEnd:a,columns:yn,data:n,children:l=>s.jsxs(ko,{id:l.id,children:[s.jsx(Lo,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:l.color}}),s.jsx("span",{children:l.name}),s.jsxs("span",{className:"ml-1 text-xs text-stone-500",children:["(",n.filter(i=>i.column===l.id).length,")"]})]})}),s.jsx(Po,{id:l.id,children:i=>s.jsxs(Oo,{id:i.id,name:i.name,column:l.id,children:[s.jsx("div",{className:"flex items-start justify-between gap-2",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("p",{className:"m-0 flex-1 font-medium text-sm",children:i.name}),i.description&&s.jsx("p",{className:"m-0 text-xs text-stone-500 truncate max-w-[180px]",children:i.description})]})}),(i.startAt||i.endAt)&&s.jsxs("p",{className:"m-0 text-muted-foreground text-xs",children:[i.startAt&&Fo.format(new Date(i.startAt)),i.startAt&&i.endAt&&" - ",i.endAt&&zo.format(new Date(i.endAt))]})]},i.id)})]},l.id)})},Dn={backlog:{label:"Backlog",color:"bg-stone-200 text-stone-800"},todo:{label:"To Do",color:"bg-blue-100 text-blue-800"},in_progress:{label:"In Progress",color:"bg-amber-100 text-amber-800"},done:{label:"Done",color:"bg-emerald-100 text-emerald-800"},on_hold:{label:"On Hold",color:"bg-red-100 text-red-800"}},Nn=e=>e?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e):"Not set",Bo=({projects:e=[]})=>s.jsx("div",{className:"divide-y divide-stone-200",children:e.length===0?s.jsx("div",{className:"py-4 text-center text-stone-500",children:"No projects to display"}):e.map(t=>s.jsx("div",{className:"py-4 px-2 hover:bg-stone-50 transition-colors cursor-pointer",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-xl",children:t.icon||"üìÅ"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-stone-900",children:t.name}),t.description&&s.jsx("p",{className:"text-sm text-stone-500 mt-1 max-w-md",children:t.description.length>100?`${t.description.substring(0,100)}...`:t.description})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Dn[t.status]?.color||"bg-stone-200 text-stone-800"}`,children:Dn[t.status]?.label||t.status}),s.jsxs("div",{className:"flex flex-col items-end gap-1 text-sm",children:[t.startDate&&s.jsxs("div",{className:"flex items-center gap-1 text-stone-500",children:[s.jsx(yr,{className:"h-3 w-3"}),s.jsxs("span",{children:["Start: ",Nn(t.startDate)]})]}),t.dueDate&&s.jsxs("div",{className:"flex items-center gap-1 text-stone-500",children:[s.jsx(En,{className:"h-3 w-3"}),s.jsxs("span",{children:["Due: ",Nn(t.dueDate)]})]})]}),s.jsx(K,{variant:"ghost",size:"icon",children:s.jsx(Tt,{className:"h-4 w-4"})})]})]})},t.id))});function _o({className:e,...t}){return s.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:s.jsx("table",{"data-slot":"table",className:q("w-full caption-bottom text-sm",e),...t})})}function Yo({className:e,...t}){return s.jsx("thead",{"data-slot":"table-header",className:q("[&_tr]:border-b",e),...t})}function Vo({className:e,...t}){return s.jsx("tbody",{"data-slot":"table-body",className:q("[&_tr:last-child]:border-0",e),...t})}function jt({className:e,...t}){return s.jsx("tr",{"data-slot":"table-row",className:q("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Re({className:e,...t}){return s.jsx("th",{"data-slot":"table-head",className:q("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function pe({className:e,...t}){return s.jsx("td",{"data-slot":"table-cell",className:q("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const jn={backlog:{label:"Backlog",color:"bg-stone-200 text-stone-800"},todo:{label:"To Do",color:"bg-blue-100 text-blue-800"},in_progress:{label:"In Progress",color:"bg-amber-100 text-amber-800"},done:{label:"Done",color:"bg-emerald-100 text-emerald-800"},on_hold:{label:"On Hold",color:"bg-red-100 text-red-800"}},Ct=e=>e?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e):"‚Äî",Uo=({projects:e=[]})=>s.jsx("div",{className:"rounded-md border overflow-hidden",children:s.jsxs(_o,{children:[s.jsx(Yo,{children:s.jsxs(jt,{children:[s.jsx(Re,{children:"Name"}),s.jsx(Re,{children:"Status"}),s.jsx(Re,{children:"Start Date"}),s.jsx(Re,{children:"Due Date"}),s.jsx(Re,{children:"Created"}),s.jsx(Re,{className:"w-[80px]",children:"Actions"})]})}),s.jsx(Vo,{children:e.length===0?s.jsx(jt,{children:s.jsx(pe,{colSpan:6,className:"text-center py-6 text-stone-500",children:"No projects to display"})}):e.map(t=>s.jsxs(jt,{className:"hover:bg-stone-50",children:[s.jsx(pe,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:t.icon||"üìÅ"}),s.jsx("span",{children:t.name})]})}),s.jsx(pe,{children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${jn[t.status]?.color||"bg-stone-200 text-stone-800"}`,children:jn[t.status]?.label||t.status})}),s.jsx(pe,{children:Ct(t.startDate)}),s.jsx(pe,{children:Ct(t.dueDate)}),s.jsx(pe,{children:Ct(t.createdAt)}),s.jsx(pe,{children:s.jsx(K,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(pr,{className:"h-4 w-4"})})})]},t.id))})]})}),Ko=({viewType:e,data:t=[],onStatusChange:n})=>{const[r,o]=c.useState(e);if(c.useEffect(()=>{o(e)},[e]),c.useEffect(()=>{const l=i=>{i.detail&&i.detail.viewType&&o(i.detail.viewType)};return window.addEventListener("viewTypeChanged",l),()=>{window.removeEventListener("viewTypeChanged",l)}},[]),c.useEffect(()=>{console.log(`ViewContainer: Now showing ${r} view with ${t.length} items`)},[r,t]),t.length===0)return s.jsx("div",{className:"flex items-center justify-center h-40 bg-gray-50 rounded-md border border-gray-200",children:s.jsx("p",{className:"text-gray-500",children:"No data available for this view"})});const a=()=>{switch(r){case"kanban":return s.jsx(wn,{projects:t,onStatusChange:n});case"list":return s.jsx(Bo,{projects:t});case"table":return s.jsx(Uo,{projects:t});case"calendar":return s.jsx(kr,{projects:t});case"gantt":return s.jsx(Or,{projects:t});default:return s.jsx(wn,{projects:t,onStatusChange:n})}};return s.jsx("div",{className:"p-4 bg-white rounded-md shadow-sm",children:a()})};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wo=Sn("Plus",Xo);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],qo=Sn("Search",Ho),ea=function(){const t=hr(),n=gr(),{activeView:r,setActiveView:o}=I.useContext(mr),[a,l]=I.useState(!1),[i,d]=I.useState(!1),[u,f]=I.useState(null),[g,y]=I.useState(""),[b,T]=I.useState(1),C=6,m=et.projects.list.useQuery(void 0,{staleTime:1e3*60,refetchOnWindowFocus:!0,refetchOnMount:!0}),p=et.projects.create.useMutation({onSuccess:()=>{m.refetch(),l(!1)}}),D=et.projects.update.useMutation({onSuccess:()=>{m.refetch(),d(!1),f(null)}}),w=et.projects.delete.useMutation({onSuccess:()=>{m.refetch()}}),R=async N=>{try{await p.mutateAsync({name:N.name,description:N.description||void 0,icon:N.icon||void 0,cover:N.cover||void 0,startDate:N.startDate||void 0,dueDate:N.dueDate||void 0,status:N.status,parentProjectId:N.parentProjectId||void 0})}catch(P){console.error("Failed to create project:",P)}},S=N=>{f(N),d(!0)},h=async N=>{if(u)try{await D.mutateAsync({id:u.id,name:N.name,description:N.description||void 0,icon:N.icon||void 0,cover:N.cover||void 0,startDate:N.startDate||void 0,dueDate:N.dueDate||void 0,status:N.status,parentProjectId:N.parentProjectId||void 0})}catch(P){console.error("Failed to update project:",P)}},x=async N=>{if(confirm("Are you sure you want to delete this project?"))try{await w.mutateAsync({id:N})}catch(P){console.error("Failed to delete project:",P)}},v=N=>{t({to:`/project-manager/projects/${N}/settings`})},j=I.useMemo(()=>(m.data||[]).map(N=>({...N,startDate:N.startDate?new Date(N.startDate):null,dueDate:N.dueDate?new Date(N.dueDate):null,createdAt:new Date(N.createdAt),updatedAt:new Date(N.updatedAt)})),[m.data]),E=I.useMemo(()=>g?j.filter(N=>N.name.toLowerCase().includes(g.toLowerCase())):j,[j,g]),M=Math.ceil(E.length/C),O=(b-1)*C,$=E.slice(O,O+C);I.useEffect(()=>{T(1)},[g]);const z=j.map(N=>({id:N.id,name:N.name})),ve=u?{id:u.id,name:u.name,description:u.description||"",icon:u.icon||"üìÅ",cover:u.cover||"",startDate:u.startDate?new Date(u.startDate).toISOString().split("T")[0]:"",dueDate:u.dueDate?new Date(u.dueDate).toISOString().split("T")[0]:"",status:u.status,parentProjectId:u.parentProjectId||void 0}:void 0;I.useEffect(()=>{console.log("Projects component: Active view is now:",r)},[r]),I.useEffect(()=>{const N=P=>{P.detail&&P.detail.viewType&&(console.log("Projects component: Received view change event:",P.detail.viewType),o&&o(P.detail.viewType))};return window.addEventListener("viewTypeChanged",N),()=>{window.removeEventListener("viewTypeChanged",N)}},[o]);const be=()=>m.isLoading?s.jsx("div",{className:"min-h-[600px] flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-stone-200 border-t-stone-600 rounded-full animate-spin"}),s.jsx("p",{className:"text-stone-600",children:"Loading projects..."})]})}):m.isError?s.jsx("div",{className:"min-h-[600px] flex items-center justify-center",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-6 max-w-lg",children:[s.jsx("h3",{className:"text-red-800 font-medium text-lg mb-2",children:"Error loading projects"}),s.jsx("p",{className:"text-red-700",children:m.error?.message||"An unexpected error occurred. Please try again."}),s.jsx("button",{onClick:()=>m.refetch(),className:"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-800 rounded-md transition-colors",children:"Try Again"})]})}):E.length===0?s.jsx("div",{className:"min-h-[600px] flex items-center justify-center",children:s.jsxs("div",{className:"bg-stone-50 border border-stone-200 rounded-md p-6 max-w-lg text-center",children:[s.jsx("h3",{className:"text-stone-800 font-medium text-lg mb-2",children:g?"No matching projects found":"No projects yet"}),s.jsx("p",{className:"text-stone-600 mb-4",children:g?`No projects matching "${g}" were found.`:"Let's create your first project to get started."}),s.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Create New Project"})]})}):r==="classic"?s.jsx("div",{className:"min-h-[600px]",children:s.jsx(Ir,{projects:$,onEdit:S,onDelete:x,onCreateProject:()=>l(!0),onProjectSettings:v,isLoading:m.isLoading})}):s.jsx("div",{className:"min-h-[600px]",children:s.jsx(Ko,{viewType:r,data:E,onStatusChange:async(N,P)=>{try{const V=E.find(we=>we.id===N);if(!V){console.error(`Project not found: ${N}`);return}if(console.log(`Attempting status update: ${V.status} -> ${P}`),!["backlog","todo","in_progress","done","on_hold"].includes(P)){console.error(`Invalid status value: ${P}`);return}await D.mutateAsync({id:N,status:P}),console.log(`Successfully updated project ${N} status to ${P}`)}catch(V){console.error("Failed to update project status:",V)}}},`view-${r}`)});return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m.isLoading?"Loading projects...":`${E.length} project${E.length!==1?"s":""}`})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(qo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",placeholder:"Search projects...",value:g,onChange:N=>y(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs(K,{onClick:()=>l(!0),disabled:p.isPending,className:"flex items-center gap-1",children:[p.isPending?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}):s.jsx(Wo,{className:"h-4 w-4"}),"New Project"]})]})]}),be(),M>1&&s.jsxs("div",{className:"flex items-center justify-between mt-6",children:[s.jsxs("div",{className:"text-xs text-gray-700",children:["Showing ",O+1," to ",Math.min(O+C,E.length)," of ",E.length," projects"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K,{variant:"outline",size:"sm",onClick:()=>T(N=>Math.max(N-1,1)),disabled:b===1,children:"Previous"}),s.jsxs("span",{className:"text-xs text-gray-600",children:["Page ",b," of ",M]}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>T(N=>Math.min(N+1,M)),disabled:b===M,children:"Next"})]})]}),s.jsx(Wt,{open:a,onOpenChange:l,children:s.jsxs(Ht,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(qt,{children:s.jsx(Gt,{children:"Create New Project"})}),s.jsx(Jt,{mode:"create",user:n,onSubmit:R,onCancel:()=>l(!1),projects:z,isLoading:p.isPending})]})}),s.jsx(Wt,{open:i,onOpenChange:N=>{d(N),N||f(null)},children:s.jsxs(Ht,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(qt,{children:s.jsx(Gt,{children:"Edit Project"})}),s.jsx(Jt,{mode:"edit",user:n,initialData:ve,onSubmit:h,onCancel:()=>{d(!1),f(null)},projects:z.filter(N=>N.id!==u?.id),isLoading:D.isPending})]})})]})};export{ea as component};
