import{r as c,y as x,j as e}from"./client-D9jdpKMx.js";import{B as f}from"./button-CC9DIoTM.js";import{u as p,L as l}from"./use-auth-hybrid-CwAHCdxh.js";const N=function(){const{signInWithGoogle:g,isLoading:s,isAuthenticated:t,session:r}=p(),[d,a]=c.useState(""),[i,h]=c.useState(!1),o=x();c.useEffect(()=>{console.log("=== LOGIN FORM STATE ==="),console.log("isAuthenticated:",t),console.log("isLoading:",s),console.log("session:",r),console.log("clientSideReady:",i);const n=setTimeout(()=>{h(!0),t&&!s&&(console.log("User is authenticated, redirecting to dashboard"),o({to:"/"}))},1e3);return()=>clearTimeout(n)},[t,s,r,i,o]);const u=async()=>{if(t){console.log("User is already authenticated, skipping sign-in"),a("You are already signed in. Redirecting..."),o({to:"/"});return}try{console.log("Double-checking auth status before sign-in..."),a("");const m=typeof window<"u"&&window.location.hostname==="localhost"?"http://localhost:3001":"https://dashboard.dev-0af.workers.dev";console.log("Attempting Google sign-in with callback:",m),await g(m)}catch(n){console.error("Sign-in error:",n),a(n instanceof Error?n.message:"Sign in failed")}};return!i||s?e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(l,{className:"mx-auto h-8 w-8 animate-spin"}),e.jsx("p",{className:"text-lg",children:"Checking authentication status..."})]})}):t&&i?e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-lg",children:"You are already signed in. Redirecting..."}),e.jsx(l,{className:"mx-auto h-6 w-6 animate-spin"})]})}):e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx("div",{className:"flex w-full items-center justify-center px-4 py-12 sm:px-6 lg:w-1/2",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Welcome back"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Sign in to your account to continue"})]}),e.jsxs(f,{variant:"outline",className:"w-full",type:"button",disabled:s||t||!i,onClick:u,children:[s&&e.jsx(l,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"mr-2 h-4 w-4",children:e.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z",fill:"currentColor"})}),s?"Signing in...":"Sign in with Google"]}),d&&e.jsx("div",{className:"text-destructive text-center text-sm",children:d})]})}),e.jsx("div",{className:"hidden w-1/2 bg-gray-100 lg:block",children:e.jsx("div",{className:"h-full w-full bg-cover bg-center",style:{backgroundImage:"url('https://storage.dev-0af.workers.dev/ordo-logo.png')"}})})]})};export{N as component};
