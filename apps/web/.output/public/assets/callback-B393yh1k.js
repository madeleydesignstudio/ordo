import{a as f,r as i,j as e,s as u}from"./main-Cyx24ME8.js";const b=function(){const r=f(),[m,h]=i.useState(!0),[a,t]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const{data:o,error:n}=await u.auth.getSession();if(n){console.error("Auth callback error:",n),t(n.message);return}if(o.session)r({to:"/"});else{const c=new URLSearchParams(window.location.hash.substring(1)),l=c.get("access_token"),d=c.get("refresh_token");if(l&&d){const{error:s}=await u.auth.setSession({access_token:l,refresh_token:d});if(s){console.error("Session error:",s),t(s.message);return}r({to:"/"})}else t("Authentication failed. Please try again."),setTimeout(()=>{r({to:"/"})},2e3)}}catch(o){console.error("Unexpected error during auth callback:",o),t("An unexpected error occurred. Please try again."),setTimeout(()=>{r({to:"/"})},2e3)}finally{h(!1)}})()},[r]),m?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"2rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1.125rem"},children:"Completing authentication..."}),e.jsx("style",{children:`
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `})]}):a?e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"2rem"},children:e.jsxs("div",{style:{maxWidth:"400px",padding:"2rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",textAlign:"center"},children:[e.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem",fontSize:"1.25rem"},children:"Authentication Error"}),e.jsx("p",{style:{color:"#7f1d1d",marginBottom:"1.5rem"},children:a}),e.jsx("button",{onClick:()=>r({to:"/login"}),style:{padding:"0.75rem 1.5rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Back to Login"})]})}):null};export{b as component};
