import{a as ne,p as V,r as b,s as F,b as T,n as Q,i as W,c as Z,t as me,f as fe,d as pe,e as G,g as $,h as J,k as xe,l as p,m as ae,u as L,o as k,q as E,v as oe,w as ge,x as O,y as ce,z as le,j as s,A as f,B as M,C as ye,D as z,R as X}from"./main-Dqfc4lB8.js";var ve=class extends ne{constructor(e,t){super(),this.options=t,this.#s=e,this.#o=null,this.#a=V(),this.options.experimental_prefetchInRender||this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#i=void 0;#t=void 0;#r;#n;#a;#o;#p;#h;#m;#l;#d;#c;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),ee(this.#e,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return q(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return q(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#N(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,i=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof b(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#e.setOptions(this.options),t._defaulted&&!F(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&te(this.#e,i,this.options,t)&&this.#u(),this.updateResult(),r&&(this.#e!==i||b(this.options.enabled,this.#e)!==b(t.enabled,this.#e)||T(this.options.staleTime,this.#e)!==T(t.staleTime,this.#e))&&this.#x();const n=this.#g();r&&(this.#e!==i||b(this.options.enabled,this.#e)!==b(t.enabled,this.#e)||n!==this.#c)&&this.#y(n)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),i=this.createResult(t,e);return Ne(this,i)&&(this.#t=i,this.#n=this.options,this.#r=this.#e.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(i,r)=>(this.trackProp(r),t?.(r),Reflect.get(i,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),i=this.#s.getQueryCache().build(this.#s,t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#u(e){this.#j();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Q)),t}#x(){this.#b();const e=T(this.options.staleTime,this.#e);if(W||this.#t.isStale||!Z(e))return;const i=me(this.#t.dataUpdatedAt,e)+1;this.#l=setTimeout(()=>{this.#t.isStale||this.updateResult()},i)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#N(),this.#c=e,!(W||b(this.options.enabled,this.#e)===!1||!Z(this.#c)||this.#c===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||fe.isFocused())&&this.#u()},this.#c))}#v(){this.#x(),this.#y(this.#g())}#b(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#N(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const i=this.#e,r=this.options,n=this.#t,o=this.#r,c=this.#n,a=e!==i?e.state:this.#i,{state:l}=e;let u={...l},j=!1,h;if(t._optimisticResults){const y=this.hasListeners(),I=!y&&ee(e,t),R=y&&te(e,i,t,r);(I||R)&&(u={...u,...pe(l.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:S,errorUpdatedAt:m,status:x}=u;h=u.data;let g=!1;if(t.placeholderData!==void 0&&h===void 0&&x==="pending"){let y;n?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(y=n.data,g=!0):y=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,y!==void 0&&(x="success",h=G(n?.data,y,t),j=!0)}if(t.select&&h!==void 0&&!g)if(n&&h===o?.data&&t.select===this.#p)h=this.#h;else try{this.#p=t.select,h=t.select(h),h=G(n?.data,h,t),this.#h=h,this.#o=null}catch(y){this.#o=y}this.#o&&(S=this.#o,h=this.#h,m=Date.now(),x="error");const w=u.fetchStatus==="fetching",v=x==="pending",C=x==="error",B=v&&w,Y=h!==void 0,N={status:x,fetchStatus:u.fetchStatus,isPending:v,isSuccess:x==="success",isError:C,isInitialLoading:B,isLoading:B,data:h,dataUpdatedAt:u.dataUpdatedAt,error:S,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>a.dataUpdateCount||u.errorUpdateCount>a.errorUpdateCount,isFetching:w,isRefetching:w&&!v,isLoadingError:C&&!Y,isPaused:u.fetchStatus==="paused",isPlaceholderData:j,isRefetchError:C&&Y,isStale:H(e,t),refetch:this.refetch,promise:this.#a,isEnabled:b(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const y=P=>{N.status==="error"?P.reject(N.error):N.data!==void 0&&P.resolve(N.data)},I=()=>{const P=this.#a=N.promise=V();y(P)},R=this.#a;switch(R.status){case"pending":e.queryHash===i.queryHash&&y(R);break;case"fulfilled":(N.status==="error"||N.data!==R.value)&&I();break;case"rejected":(N.status!=="error"||N.error!==R.reason)&&I();break}}return N}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#n=this.options,this.#r.data!==void 0&&(this.#m=this.#e),F(t,e))return;this.#t=t;const i=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,n=typeof r=="function"?r():r;if(n==="all"||!n&&!this.#f.size)return!0;const o=new Set(n??this.#f);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(c=>{const d=c;return this.#t[d]!==e[d]&&o.has(d)})};this.#R({listeners:i()})}#j(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#R(e){$.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function be(e,t){return b(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ee(e,t){return be(e,t)||e.state.data!==void 0&&q(e,t,t.refetchOnMount)}function q(e,t,i){if(b(t.enabled,e)!==!1&&T(t.staleTime,e)!=="static"){const r=typeof i=="function"?i(e):i;return r==="always"||r!==!1&&H(e,t)}return!1}function te(e,t,i,r){return(e!==t||b(r.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&H(e,i)}function H(e,t){return b(t.enabled,e)!==!1&&e.isStaleByTime(T(t.staleTime,e))}function Ne(e,t){return!F(e.getCurrentResult(),t)}var je=class extends ne{#s;#e=void 0;#i;#t;constructor(e,t){super(),this.#s=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#s.defaultMutationOptions(e),F(this.options,t)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),t?.mutationKey&&this.options.mutationKey&&J(t.mutationKey)!==J(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#n(e)}getCurrentResult(){return this.#e}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#r(),this.#n()}mutate(e,t){return this.#t=t,this.#i?.removeObserver(this),this.#i=this.#s.getMutationCache().build(this.#s,this.options),this.#i.addObserver(this),this.#i.execute(e)}#r(){const e=this.#i?.state??xe();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#n(e){$.batch(()=>{if(this.#t&&this.hasListeners()){const t=this.#e.variables,i=this.#e.context;e?.type==="success"?(this.#t.onSuccess?.(e.data,t,i),this.#t.onSettled?.(e.data,null,t,i)):e?.type==="error"&&(this.#t.onError?.(e.error,t,i),this.#t.onSettled?.(void 0,e.error,t,i))}this.listeners.forEach(t=>{t(this.#e)})})}},de=p.createContext(!1),Re=()=>p.useContext(de);de.Provider;function we(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ce=p.createContext(we()),De=()=>p.useContext(Ce),Te=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Me=e=>{p.useEffect(()=>{e.clearReset()},[e])},Ee=({result:e,errorResetBoundary:t,throwOnError:i,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||ae(i,[e.error,r])),Oe=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...r)=>t(i(...r)):t(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ke=(e,t)=>e.isLoading&&e.isFetching&&!t,Se=(e,t)=>e?.suspense&&t.isPending,se=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function Ie(e,t,i){const r=Re(),n=De(),o=L(),c=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=r?"isRestoring":"optimistic",Oe(c),Te(c,n),Me(n);const d=!o.getQueryCache().get(c.queryHash),[a]=p.useState(()=>new t(o,c)),l=a.getOptimisticResult(c),u=!r&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(j=>{const h=u?a.subscribe($.batchCalls(j)):Q;return a.updateResult(),h},[a,u]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),p.useEffect(()=>{a.setOptions(c)},[c,a]),Se(c,l))throw se(c,a,n);if(Ee({result:l,errorResetBoundary:n,throwOnError:c.throwOnError,query:o.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw l.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(c,l),c.experimental_prefetchInRender&&!W&&ke(l,r)&&(d?se(c,a,n):o.getQueryCache().get(c.queryHash)?.promise)?.catch(Q).finally(()=>{a.updateResult()}),c.notifyOnChangeProps?l:a.trackResult(l)}function A(e,t){return Ie(e,ve)}function ue(e,t){const i=L(),[r]=p.useState(()=>new je(i,e));p.useEffect(()=>{r.setOptions(e)},[r,e]);const n=p.useSyncExternalStore(p.useCallback(c=>r.subscribe($.batchCalls(c)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=p.useCallback((c,d)=>{r.mutate(c,d).catch(Q)},[r]);if(n.error&&ae(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ue=k("ChevronLeft",Pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Qe=k("ChevronRight",Fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],$e=k("Clock",_e);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ze=k("Plus",Le);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],We=k("Target",Ke);function _(e,t,i){const r=E(e,i?.in);return isNaN(t)?oe(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function ie(e,t,i){const[r,n]=ge(i?.in,e,t);return+O(r)==+O(n)}function qe(e,t){return+E(e)>+E(t)}function re(e,t,i){return _(e,-t,i)}function He(e,t){const i=()=>oe(t?.in,NaN),n=Ve(e);let o;if(n.date){const l=Ze(n.date,2);o=Ge(l.restDateString,l.year)}if(!o||isNaN(+o))return i();const c=+o;let d=0,a;if(n.time&&(d=Je(n.time),isNaN(d)))return i();if(n.timezone){if(a=Xe(n.timezone),isNaN(a))return i()}else{const l=new Date(c+d),u=E(0,t?.in);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return E(c+d+a,t?.in)}const U={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ae=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Be=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ye=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ve(e){const t={},i=e.split(U.dateTimeDelimiter);let r;if(i.length>2)return t;if(/:/.test(i[0])?r=i[0]:(t.date=i[0],r=i[1],U.timeZoneDelimiter.test(t.date)&&(t.date=e.split(U.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const n=U.timezone.exec(r);n?(t.time=r.replace(n[1],""),t.timezone=n[1]):t.time=r}return t}function Ze(e,t){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(i);if(!r)return{year:NaN,restDateString:""};const n=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?n:o*100,restDateString:e.slice((r[1]||r[2]).length)}}function Ge(e,t){if(t===null)return new Date(NaN);const i=e.match(Ae);if(!i)return new Date(NaN);const r=!!i[4],n=D(i[1]),o=D(i[2])-1,c=D(i[3]),d=D(i[4]),a=D(i[5])-1;if(r)return rt(t,d,a)?et(t,d,a):new Date(NaN);{const l=new Date(0);return!st(t,o,c)||!it(t,n)?new Date(NaN):(l.setUTCFullYear(t,o,Math.max(n,c)),l)}}function D(e){return e?parseInt(e):1}function Je(e){const t=e.match(Be);if(!t)return NaN;const i=K(t[1]),r=K(t[2]),n=K(t[3]);return nt(i,r,n)?i*ce+r*le+n*1e3:NaN}function K(e){return e&&parseFloat(e.replace(",","."))||0}function Xe(e){if(e==="Z")return 0;const t=e.match(Ye);if(!t)return 0;const i=t[1]==="+"?-1:1,r=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return at(r,n)?i*(r*ce+n*le):NaN}function et(e,t,i){const r=new Date(0);r.setUTCFullYear(e,0,4);const n=r.getUTCDay()||7,o=(t-1)*7+i+1-n;return r.setUTCDate(r.getUTCDate()+o),r}const tt=[31,null,31,30,31,30,31,31,30,31,30,31];function he(e){return e%400===0||e%4===0&&e%100!==0}function st(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(tt[t]||(he(e)?29:28))}function it(e,t){return t>=1&&t<=(he(e)?366:365)}function rt(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}function nt(e,t,i){return e===24?t===0&&i===0:i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}function at(e,t){return t>=0&&t<=59}async function ot(){return await new Promise(e=>setTimeout(e,500)),{milestones:[{id:"1",title:"Launch Ordo",description:"Complete MVP and launch to public",targetDate:new Date("2026-01-01"),progress:45,category:"project"},{id:"2",title:"Complete Dashboard Design",targetDate:new Date("2024-03-20"),progress:80,category:"work"}],total:2}}async function ct(){return await new Promise(e=>setTimeout(e,300)),{morning:[{id:"1",title:"Meditate",completed:!0,timeEstimate:"10 mins"},{id:"2",title:"Read for 45 mins",completed:!1,timeEstimate:"45 mins"},{id:"3",title:"Review daily goals",completed:!1,timeEstimate:"5 mins"}],evening:[{id:"1",title:"Turn off electronics",completed:!1,timeEstimate:"1 hour before bed"},{id:"2",title:"Reflect on the day",completed:!1,timeEstimate:"10 mins"},{id:"3",title:"Prepare for tomorrow",completed:!1,timeEstimate:"15 mins"}],currentTasks:[{id:"1",title:"Complete Dashboard Design",completed:!1,timeEstimate:"2 hours"},{id:"2",title:"Review project proposals",completed:!0,timeEstimate:"30 mins"},{id:"3",title:"Team standup meeting",completed:!1,timeEstimate:"15 mins"}]}}async function lt(e,t){await new Promise(c=>setTimeout(c,400));const i={},r="2024-03-18",n="2024-03-20",o="2024-03-22";return i[r]=[{id:`${r}-1`,title:"Team Standup",priority:"high",completed:!1}],i[n]=[{id:`${n}-1`,title:"Project Review",priority:"medium",completed:!1},{id:`${n}-2`,title:"Client Meeting",priority:"high",completed:!1}],i[o]=[{id:`${o}-1`,title:"Weekly Planning",priority:"high",completed:!1}],{events:i}}async function dt(e,t){return await new Promise(i=>setTimeout(i,200)),{id:e,title:"Updated Item",completed:t,timeEstimate:"5 mins"}}async function ut(e,t,i){return await new Promise(r=>setTimeout(r,300)),{id:`${e}-${Date.now()}`,title:t,priority:i,completed:!1}}const ht=()=>({queryKey:["milestones"],queryFn:ot,staleTime:300*1e3,gcTime:600*1e3}),mt=()=>({queryKey:["routines"],queryFn:ct,staleTime:120*1e3,gcTime:300*1e3}),ft=(e,t)=>({queryKey:["week-events",e,t],queryFn:()=>lt(),staleTime:30*1e3,gcTime:120*1e3});function pt(){const{data:e,isLoading:t,error:i}=A(ht());if(t)return s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsx("h3",{className:"text-base font-semibold mb-3 text-muted-foreground",children:"Upcoming Milestones"}),s.jsx("div",{className:"relative h-32",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"w-8 h-8 bg-muted rounded-full"})})})})]});if(i)return s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsx("h3",{className:"text-base font-semibold mb-3 text-muted-foreground",children:"Upcoming Milestones"}),s.jsx("div",{className:"relative h-32 flex items-center justify-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed to load milestones"})})]});const r=e?.milestones.filter(n=>qe(n.targetDate,new Date)).sort((n,o)=>n.targetDate.getTime()-o.targetDate.getTime()).slice(0,3)||[];return s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsx("h3",{className:"text-base font-semibold mb-3 text-muted-foreground",children:"Upcoming Milestones"}),s.jsx("div",{className:"relative h-32",children:r.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"relative w-full h-32",children:[s.jsx("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 80",children:s.jsx("path",{d:"M50 40 Q150 15 250 40 Q350 65 380 40",stroke:"hsl(var(--border))",strokeWidth:"2",fill:"none",opacity:"0.3"})}),r.map((n,o)=>s.jsx("div",{className:"absolute",style:{left:`${20+o*60}%`,top:`${25+o%2*30}%`},children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-5 h-5 rounded-full bg-primary flex items-center justify-center text-xs text-primary-foreground font-bold",children:o+1}),s.jsxs("div",{className:"mt-1 text-center max-w-20",children:[s.jsx("p",{className:"text-xs font-medium truncate",children:n.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:f(n.targetDate,"MMM d")})]})]})},n.id))]})}),r[0]&&s.jsx("div",{className:"absolute bottom-0 right-0",children:s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:f(r[0].targetDate,"do MMMM yyyy")}),s.jsx("p",{className:"text-sm font-semibold",children:r[0].title})]})})]}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"No upcoming milestones"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Create your first milestone to get started"})]})})})]})}function xt(e,t){const i=t.getHours();return i>=5&&i<12?{title:"Morning Routine",items:e?.morning||[],type:"morning"}:i>=12&&i<18?{title:"Current Tasks",items:e?.currentTasks||[],type:"day"}:{title:"Nightly Cooldown",items:e?.evening||[],type:"evening"}}function gt({activeDate:e}){const t=L(),{data:i,isLoading:r,error:n}=A(mt()),o=ue({mutationFn:({id:a,completed:l})=>dt(a,l),onSuccess:(a,l)=>{t.invalidateQueries({queryKey:["routines"]});const u=l.completed?"completed":"uncompleted";console.log(`Routine item ${u} successfully`)},onError:a=>{const l=a?.message||"Failed to update routine item";console.error("Failed to update routine item:",l)}}),c=(a,l)=>{o.mutate({id:a,completed:!l})};if(r)return s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("div",{className:"h-5 w-32 bg-muted animate-pulse rounded"})}),s.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((a,l)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-muted animate-pulse rounded"}),s.jsx("div",{className:"h-4 w-40 bg-muted animate-pulse rounded"})]},l))})]});if(n)return s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsx("h3",{className:"text-base font-semibold mb-3 text-muted-foreground",children:"Routine"}),s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Failed to load routine data"}),s.jsx(M,{variant:"outline",size:"sm",onClick:()=>{t.invalidateQueries({queryKey:["routines"]}),console.log("Retrying to load routine data...")},children:"Retry"})]})})]});const d=xt(i,e);return s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-base font-semibold text-muted-foreground",children:d.title}),d.type==="evening"&&s.jsx("span",{className:"text-sm text-primary",children:"Meditate"})]}),d.type==="evening"?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[s.jsxs("p",{className:"text-sm font-medium",children:["Good evening ",f(e,"EEEE")]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Time to cooldown and setup for tomorrow."})]}),s.jsx("div",{className:"space-y-2",children:d.items.slice(0,3).map(a=>s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx("button",{onClick:()=>c(a.id,a.completed),disabled:o.isPending,className:`w-3 h-3 rounded border-2 transition-colors ${a.completed?"bg-primary border-primary":"border-muted-foreground hover:border-primary"} ${o.isPending?"opacity-50":""}`}),s.jsx("span",{className:a.completed?"line-through text-muted-foreground":"",children:a.title}),a.timeEstimate&&s.jsx("span",{className:"text-muted-foreground ml-auto text-xs",children:a.timeEstimate})]},a.id))}),s.jsx(M,{variant:"outline",size:"sm",className:"w-full mt-3",children:"View Routine"})]}):s.jsx("div",{className:"space-y-2",children:d.items.length>0?d.items.map(a=>s.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded hover:bg-muted/30 transition-colors",children:[s.jsx("button",{onClick:()=>c(a.id,a.completed),disabled:o.isPending,className:`w-3 h-3 rounded border-2 transition-colors ${a.completed?"bg-primary border-primary":"border-muted-foreground hover:border-primary"} ${o.isPending?"opacity-50":""}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm ${a.completed?"line-through text-muted-foreground":""}`,children:a.title}),a.timeEstimate&&s.jsx("p",{className:"text-xs text-muted-foreground",children:a.timeEstimate})]})]},a.id)):s.jsx("div",{className:"flex items-center justify-center h-20",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["No ",d.type==="morning"?"morning routine":"tasks"," ","for today"]})})})]})}function yt(e){return e.includes("/projects")?We:e.includes("/journal")?z:e.includes("/knowledge")?z:e.includes("/settings")?$e:z}function vt(){const{recentPages:e}=ye();return s.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[s.jsx("h3",{className:"text-base font-semibold mb-3 text-muted-foreground",children:"Recently Visited"}),s.jsx("div",{className:"grid grid-cols-6 gap-2",children:e.length>0?e.slice(0,6).map(t=>{const i=yt(t.path);return s.jsx("div",{className:"p-2 rounded border bg-muted/20 hover:bg-muted/40 transition-colors cursor-pointer",onClick:()=>{console.log(`Navigate to ${t.path}`)},children:s.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[s.jsx(i,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium truncate w-full text-center",children:t.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:f(t.timestamp,"HH:mm")})]})},t.id)}):s.jsx("div",{className:"col-span-6 flex items-center justify-center h-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent visits"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Your recently visited pages will appear here"})]})})})]})}function bt(e,t){const i=[];for(let r=-3;r<=3;r++){const n=_(e,r),o=f(n,"EEEE").toUpperCase(),c=n.getDate(),d=f(n,"yyyy-MM-dd"),a=t?.[d]||[];i.push({date:n,dayName:o,dayNumber:c,events:a})}return i}function Nt({activeDate:e,onActiveDateChange:t}){const i=L(),r=f(re(e,3),"yyyy-MM-dd"),n=f(_(e,3),"yyyy-MM-dd"),{data:o,isLoading:c,error:d}=A(ft(r,n)),a=ue({mutationFn:({date:m,title:x,priority:g})=>ut(m,x,g),onSuccess:()=>{i.invalidateQueries({queryKey:["week-events"]})}}),l=bt(e,o?.events),u=()=>{t(re(e,1))},j=()=>{t(_(e,1))},h=()=>{t(O(new Date))},S=m=>{const x=f(m,"yyyy-MM-dd"),g=prompt("Enter event title:");g&&g.trim()&&a.mutate({date:x,title:g.trim(),priority:"medium"})};return d?s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("h3",{className:"text-base font-semibold text-muted-foreground",children:"This Week"})}),s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed to load calendar events"})})]}):s.jsxs("div",{className:"rounded-lg border bg-card p-4 flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"text-base font-semibold text-muted-foreground",children:f(e,"MMMM yyyy")}),s.jsx(M,{variant:"outline",size:"sm",onClick:h,className:"text-xs",children:"Today"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(M,{variant:"ghost",size:"sm",onClick:u,children:s.jsx(Ue,{className:"w-4 h-4"})}),s.jsx(M,{variant:"ghost",size:"sm",onClick:j,children:s.jsx(Qe,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:l.map((m,x)=>{const g=ie(m.date,e),w=ie(m.date,new Date);return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:m.dayName}),s.jsx("button",{onClick:()=>t(m.date),className:`text-sm font-semibold rounded-full w-8 h-8 flex items-center justify-center mx-auto transition-colors hover:bg-muted/40 ${g?"bg-primary text-primary-foreground":w?"bg-primary/20 text-primary":""}`,children:m.dayNumber})]}),s.jsx("div",{className:`min-h-[100px] p-1 rounded border bg-muted/10 space-y-1 transition-all ${g?"ring-2 ring-primary/20 bg-primary/5":""}`,children:c?s.jsx("div",{className:"space-y-1",children:Array.from({length:2}).map((v,C)=>s.jsx("div",{className:"h-6 bg-muted/40 rounded animate-pulse"},C))}):s.jsxs(s.Fragment,{children:[m.events.slice(0,2).map(v=>s.jsx("div",{className:`p-1 text-xs rounded cursor-pointer transition-colors ${v.priority==="high"?"bg-green-500/20 text-green-700 dark:text-green-300 hover:bg-green-500/30":v.priority==="medium"?"bg-purple-500/20 text-purple-700 dark:text-purple-300 hover:bg-purple-500/30":"bg-muted/40 hover:bg-muted/60"} ${v.completed?"opacity-60 line-through":""}`,onClick:()=>{console.log("Event clicked:",v)},children:v.title},v.id)),m.events.length<2&&s.jsx("button",{onClick:()=>S(m.date),disabled:a.isPending,className:`flex items-center justify-center h-6 w-full border-2 border-dashed border-muted-foreground/30 rounded hover:border-muted-foreground/50 transition-colors ${a.isPending?"opacity-50":""}`,children:s.jsx(ze,{className:"w-3 h-3 text-muted-foreground/50"})})]})}),g&&s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mx-auto"})})]},m.date.toISOString())})}),s.jsx("div",{className:"flex justify-center mt-3 text-xs text-muted-foreground",children:s.jsxs("span",{children:[f(l[0].date,"MMM d")," -"," ",f(l[6].date,"MMM d, yyyy")]})})]})}const wt=function(){const t=X.useNavigate(),{date:i}=X.useSearch(),r=i?O(He(i)):O(new Date),n=f(r,"EEEE").toUpperCase(),o=f(r,"do MMMM"),c=d=>{const a=f(d,"yyyy-MM-dd");t({search:{date:a},replace:!0})};return s.jsxs("div",{className:"h-full flex flex-col p-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:n}),s.jsx("p",{className:"text-sm text-muted-foreground",children:o})]}),s.jsxs("div",{className:"flex gap-4 h-48",children:[s.jsx(pt,{}),s.jsx(gt,{activeDate:r})]}),s.jsx("div",{className:"h-24",children:s.jsx(vt,{})}),s.jsx(Nt,{activeDate:r,onActiveDateChange:c})]})};export{wt as component};
